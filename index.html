<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المقررات الدراسية وحاسبة المعدل - TIC & BAIT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        .tab-btn.active { color: white; box-shadow: 0 4px 14px 0 rgba(0, 0, 0, 0.2); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .semester-title { font-size: 1.75rem; font-weight: 700; margin-bottom: 1.5rem; margin-top: 2rem; padding-bottom: 0.5rem; border-bottom: 2px solid #374151; }
        #tab1 .semester-title { color: #60a5fa; } /* blue-400 */
        #tab2 .semester-title { color: #2dd4bf; } /* teal-400 */
        #tab3 .semester-title { color: #c084fc; } /* purple-400 */
        #tab4 .semester-title { color: #f59e0b; } /* amber-500 */
        .grid { display: grid; align-items: stretch; }
        .card { display: flex; flex-direction: column; justify-content: space-between; }
        .result-card { transition: all 0.4s ease-in-out; }
        .gpa-card.selected { border-color: #f59e0b; transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(245, 158, 11, 0.1), 0 4px 6px -2px rgba(245, 158, 11, 0.05); }
        
        /* Modal Styles */
        #course-modal { backdrop-filter: blur(5px); }
        #course-modal .modal-content { animation: zoomIn 0.3s ease-out; }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body class="bg-gray-900 text-white selection:bg-blue-500 selection:text-white">

    <div class="container mx-auto px-4 py-8 md:py-12">
        
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-teal-400 to-purple-400">المقررات الدراسية</h1>
            <p class="text-lg text-gray-400">في المعهد التقاني للحاسوب TIC ومسارات الترقية بعده للـ BAIT</p>
        </header>

        <div class="flex flex-col sm:flex-row justify-center items-center gap-2 md:gap-4 mb-8 p-2 bg-gray-800/50 rounded-xl max-w-4xl mx-auto">
            <button data-tab="tab1" class="tab-btn w-full sm:w-auto flex-1 text-gray-300 font-semibold py-3 px-6 rounded-lg transition-all duration-300 ease-in-out hover:bg-gray-700">المعهد التقاني (TIC)</button>
            <button data-tab="tab2" class="tab-btn w-full sm:w-auto flex-1 text-gray-300 font-semibold py-3 px-6 rounded-lg transition-all duration-300 ease-in-out hover:bg-gray-700">ترقية (ISDN)</button>
            <button data-tab="tab3" class="tab-btn w-full sm:w-auto flex-1 text-gray-300 font-semibold py-3 px-6 rounded-lg transition-all duration-300 ease-in-out hover:bg-gray-700">ترقية (MIS)</button>
            <button data-tab="tab4" class="tab-btn w-full sm:w-auto flex-1 text-gray-300 font-semibold py-3 px-6 rounded-lg transition-all duration-300 ease-in-out hover:bg-gray-700">حاسبة المعدل</button>
        </div>
        
        <div id="disclaimer-note" class="text-center max-w-2xl mx-auto mb-10">
            <div class="bg-gray-800/60 border border-teal-500/30 rounded-lg p-4">
                <p class="text-gray-300"><b class="font-bold text-teal-400">ملاحظة:</b> تقسيم المواد على الفصول هو مجرد خطة مقترحة لضمان أفضل مسار تعليمي، ويمكن للطلاب تعديلها بما يتناسب مع ظروفهم الأكاديمية.</p>
            </div>
        </div>

        <main id="main-content">
            <!-- Content will be dynamically generated here by JavaScript -->
        </main>
    </div>
    
    <!-- Course Details Modal -->
    <div id="course-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 bg-black/70">
        <div class="modal-content relative bg-gray-800 border border-blue-500/30 rounded-2xl shadow-2xl w-full max-w-lg mx-auto p-6 md:p-8">
            <button id="modal-close-btn" class="absolute top-4 left-4 text-gray-400 hover:text-white transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <h3 id="modal-title" class="text-2xl font-bold text-blue-400 mb-2"></h3>
            <p id="modal-code" class="text-gray-500 mb-4"></p>
            <p id="modal-description" class="text-gray-300 leading-relaxed mb-6"></p>
            <a id="modal-telegram-link" href="#" target="_blank" rel="noopener noreferrer" class="inline-block w-full text-center bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-lg shadow-blue-500/20">
                الانضمام لمجموعة المادة
            </a>
        </div>
    </div>


    <footer class="text-center py-8 mt-12 border-t border-gray-800">
        <p class="text-gray-500 mb-4">Developed by Akram Tello</p>
        <a href="https://t.me/AkraM_Tello" target="_blank" rel="noopener noreferrer" class="inline-block bg-teal-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-teal-600 transition-colors duration-300 shadow-lg shadow-teal-500/20">تواصل معي</a>
    </footer>

    <script>
        // --- DATA STORE (Curriculum Viewer) ---
        const curriculumData = {
            tab1: { // TIC
                semesters: {
                    'الفصل الأول': [
                        { name: 'مهارات الحاسوب', code: 'GBS101', crd: 4, pre: 'لا يوجد', description: 'يقدم هذا المقرر المهارات الأساسية لاستخدام الحاسوب وتطبيقاته المكتبية بكفاءة، بما يعادل شهادة (ICDL). ستتعلم استخدام معالجات النصوص، جداول البيانات، وقواعد البيانات، وهي أدوات أساسية لأي متخصص.', telegramLink: '#' },
                        { name: 'مقدمة في التعلم الإلكتروني', code: 'GBS103', crd: 4, pre: 'لا يوجد', description: 'صُمم هذا المقرر لتعريفك بآليات الدراسة في البيئة الافتراضية للجامعة. ستتعلم كيفية استخدام المنصات التعليمية بفعالية، وأفضل أساليب إدارة الوقت والتواصل الأكاديمي عبر الإنترنت.', telegramLink: '#' },
                        { name: 'التحليل الرياضي', code: 'GMA101', crd: 4, pre: 'لا يوجد', description: 'يغطي المقرر المفاهيم الرياضية الأساسية التي تعتبر ضرورية لدراسة علوم الحاسوب، مثل التوابع والمتتاليات والتفاضل والتكامل، والتي تساهم في تطوير القدرة على التفكير المنطقي وحل المشكلات.', telegramLink: '#' },
                        { name: 'مقدمة في البرمجة', code: 'IPG101', crd: 5, pre: 'لا يوجد', description: 'يركز هذا المقرر على المبادئ الأساسية للبرمجة والتفكير المنطقي. ستتعلم فيه كيفية تحليل المشكلات، تصميم الخوارزميات، وكتابة برامجك الأولى باستخدام لغة C#. الهدف هو بناء أساس برمجي متين للمقررات المتقدمة.', telegramLink: '#' },
                        { name: 'مقدمة في نمذجة المعطيات', code: 'IIS101', crd: 4, pre: 'لا يوجد', description: 'يتناول المقرر المفاهيم الأولية لتصميم قواعد البيانات. ستتعلم كيفية تحليل متطلبات البيانات وتصميم نماذج منطقية لها، مما يمثل الخطوة الأولى والأساسية في بناء أي نظام معلوماتي.', telegramLink: '#' },
                        { name: 'تقانات التجارة الإلكترونية', code: 'IWB101', crd: 5, pre: 'لا يوجد', description: 'يقدم هذا المقرر نظرة عامة على المفاهيم والتقنيات المستخدمة في عالم التجارة الإلكترونية، بما في ذلك نماذج الأعمال المختلفة، وأساليب التسويق الرقمي، وآليات الدفع عبر الإنترنت.', telegramLink: '#' },
                    ],
                    'الفصل الثاني': [
                        { name: 'البرمجة الإجرائية', code: 'IPG202', crd: 5, pre: 'IPG101', description: 'يعلمك هذا المقرر أساليب تنظيم الشيفرة البرمجية في البرامج الكبيرة عبر تقسيمها إلى وحدات وظيفية أصغر (إجراءات وتوابع)، مما يجعل الكود أكثر قابلية للقراءة والصيانة.', telegramLink: '#' },
                        { name: 'مقدمة في الشبكات', code: 'INT101', crd: 5, pre: 'GBS101', description: 'ستتعلم في هذا المقرر أساسيات شبكات الحاسوب، بما في ذلك أنواع الشبكات، ومكوناتها، والبروتوكولات الأساسية مثل (TCP/IP) التي تنظم عملية الاتصال ونقل البيانات بين الأجهزة.', telegramLink: '#' },
                        { name: 'مقدمة في نظم التشغيل', code: 'IOS101', crd: 5, pre: 'GBS101', description: 'يستعرض المقرر المكونات والوظائف الأساسية لأنظمة التشغيل، مثل إدارة الذاكرة، والعمليات، ونظام الملفات. الهدف هو فهم كيفية إدارة نظام التشغيل لموارد الحاسوب ليسمح للبرامج بالعمل بكفاءة.', telegramLink: '#' },
                        { name: 'إلكترونيات رقمية', code: 'GDE101', crd: 5, pre: 'لا يوجد', description: 'يتناول هذا المقرر المبادئ الأساسية للدوائر والأنظمة الرقمية، بما في ذلك البوابات المنطقية وأنظمة العد. الهدف هو فهم كيفية عمل المكونات الإلكترونية الدقيقة التي تشكل أساس بناء أجهزة الحاسوب.', telegramLink: '#' },
                        { name: 'تصميم وبنيان قواعد المعطيات', code: 'IIS201', crd: 5, pre: 'IIS101', description: 'ستتعمق في هذا المقرر في الجوانب المتقدمة لتصميم قواعد البيانات العلائقية، وكيفية تطبيق قواعد التسوية (Normalization) لضمان سلامة البيانات، بالإضافة إلى ترجمة التصاميم إلى جداول فعلية باستخدام لغة SQL.', telegramLink: '#' },
                        { name: 'لغة إنكليزية - مستوى أول', code: 'Eng1', crd: 3, pre: 'لا يوجد', description: 'يركز هذا المقرر على بناء أساس متين في اللغة الإنجليزية، حيث يغطي القواعد والمفردات الأساسية اللازمة لفهم النصوص التقنية البسيطة والتواصل بشكل فعال في بيئة العمل الأولية.', telegramLink: '#' },
                    ],
                    'الفصل الثالث': [
                        { name: 'تحضير السيرة المهنية', code: 'GBS102', crd: 3, pre: 'لا يوجد', description: 'يهدف المقرر إلى تزويدك بالمهارات اللازمة لدخول سوق العمل. ستتعلم التقنيات الصحيحة لكتابة السيرة الذاتية ورسائل التقديم، بالإضافة إلى استراتيجيات التحضير لمقابلات العمل وكيفية عرض مهاراتك بفعالية.', telegramLink: '#' },
                        { name: 'تصميم وتطوير تطبيقات الويب', code: 'IWB201', crd: 6, pre: 'IWB101/IIS101', description: 'يغطي المقرر دورة حياة تطوير تطبيقات الويب التفاعلية. ستتعلم تقنيات برمجة الواجهات الأمامية (Front-end) التي يراها المستخدم، وتقنيات برمجة الخادم (Back-end) التي تعالج البيانات والمنطق.', telegramLink: '#' },
                        { name: 'نظم التشغيل الشبكية', code: 'IOS201', crd: 6, pre: 'IOS101/INT101', description: 'يتناول المقرر أنظمة التشغيل المصممة لإدارة موارد الشبكة والخوادم. ستتعلم كيفية إعداد الخدمات الشبكية، إدارة المستخدمين والصلاحيات، وتأمين البيئات الشبكية.', telegramLink: '#' },
                        { name: 'البرمجة المقادة بالأحداث', code: 'IPG201', crd: 6, pre: 'IPG101', description: 'يركز المقرر على تطوير تطبيقات ذات واجهات مستخدم رسومية (GUI). ستتعلم كيفية تصميم النوافذ والأزرار والقوائم، وبرمجة استجابة التطبيق لتفاعلات المستخدم مثل نقرات الفأرة أو إدخال النص.', telegramLink: '#' },
                        { name: 'التصميم والبرمجة غرضية التوجه', code: 'IPG203', crd: 6, pre: 'IPG101', description: 'يقدم هذا المقرر منهجية البرمجة كائنية التوجه (OOP)، وهي طريقة متقدمة لتصميم البرمجيات تقوم على محاكاة الكائنات الواقعية. ستتعلم مفاهيم مثل الأصناف، الكائنات، والوراثة لبناء برامج مرنة وقابلة للتوسعة.', telegramLink: '#' },
                        { name: 'البرمجة المتقدمة بلغة SQL', code: 'IIS202', crd: 6, pre: 'IIS101', description: 'يهدف المقرر إلى تعميق معرفتك بلغة SQL، حيث ستتعلم كيفية كتابة استعلامات معقدة، واستخدام الوظائف المتقدمة، والإجراءات المخزنة لمعالجة البيانات وتحليلها بكفاءة عالية.', telegramLink: '#' },
                        { name: 'لغة إنكليزية - مستوى ثاني', code: 'Eng2', crd: 3, pre: 'Eng1', description: 'يبني هذا المقرر على مكتسبات المستوى الأول، حيث يتناول تراكيب لغوية أكثر تعقيدًا ومصطلحات تقنية متخصصة في مجال تكنولوجيا المعلومات، بهدف تحسين قدرة الطالب على فهم المقالات التقنية وكتابة التقارير.', telegramLink: '#' },
                    ],
                    'الفصل الرابع': [
                        { name: 'منصة ويندوز', code: 'IOS202', crd: 5, pre: 'IOS101/INT101/ENG3', description: 'يركز هذا المقرر على إدارة بيئات العمل والخوادم التي تعمل بنظام تشغيل Windows Server. ستكتسب مهارات عملية في إدارة الشبكات، المستخدمين، والخدمات الأساسية في بيئة ويندوز.', telegramLink: '#' },
                        { name: 'منصة لينوكس', code: 'IOS203', crd: 6, pre: 'IOS101/INT101/ENG3', description: 'ستتعلم في هذا المقرر أساسيات إدارة أنظمة التشغيل المستندة إلى Linux، بما في ذلك التعامل مع سطر الأوامر، إدارة الملفات والصلاحيات، وتثبيت البرامج، وهي مهارات أساسية للعمل مع الخوادم.', telegramLink: '#' },
                        { name: 'إدارة قواعد بيانات MS SQL Server', code: 'IIS303', crd: 6, pre: 'IIS201/IIS202/ENG3', description: 'يوفر هذا المقرر المهارات اللازمة لإدارة وصيانة أنظمة قواعد بيانات Microsoft SQL Server. ستغطي موضوعات مثل التثبيت، النسخ الاحتياطي والاستعادة، مراقبة الأداء، وتطبيق سياسات الأمان.', telegramLink: '#' },
                        { name: 'إدارة قواعد بيانات Oracle', code: 'IIS203', crd: 6, pre: 'IIS201/IIS202/ENG3', description: 'يركز المقرر على إدارة أنظمة قواعد بيانات Oracle، التي تستخدم على نطاق واسع في المؤسسات الكبرى. ستتعلم بنيتها المعمارية، وأدوات إدارتها، وكيفية تنفيذ مهام الصيانة والأمان الأساسية.', telegramLink: '#' },
                        { name: 'برمجة التطبيقات النقالة', code: 'IPG204', crd: 6, pre: 'IWB201', description: 'يقدم المقرر المفاهيم الأساسية لتطوير التطبيقات على الهواتف المحمولة. ستتعرف على خصائص بيئات الموبايل المختلفة، ودورة حياة التطبيق، وكيفية تصميم واجهات مستخدم مناسبة للشاشات الصغيرة.', telegramLink: '#' },
                        { name: 'مشروع', code: 'IPI201', crd: 12, pre: 'ENG3/IIS201/IWB201', description: 'في هذا المقرر التطبيقي، ستقوم بتوظيف جميع المهارات والمعارف التي اكتسبتها خلال دراستك لتطوير مشروع برمجي متكامل. ستمر بكافة مراحل تطوير البرمجيات، بدءًا من التحليل ووضع المتطلبات، وصولًا إلى التصميم والتنفيذ والاختبار، مما يمنحك خبرة عملية تحاكي بيئة العمل الحقيقية سواء قمت بتصميم موقع وب او تطبيق موبايل او تطبيق ديسكتوب....الخ', telegramLink: '#' },
                        { name: 'لغة إنكليزية - مستوى ثالث', code: 'Eng3', crd: 3, pre: 'Eng2', description: 'يهدف المقرر إلى الوصول بالطالب إلى مستوى متقدم من الكفاءة اللغوية، حيث يتم التدرب على فهم الوثائق التقنية المعقدة، والمشاركة في النقاشات التخصصية، وكتابة المراسلات والتقارير المهنية.', telegramLink: '#' },
                    ],
                }, colors: { card: 'hover:border-blue-500', text: 'text-blue-400', icon: 'text-blue-400' }
            },
            tab2: { // ISDN Data
                semesters: {
                    'الفصل الأول': [ { name: 'اساسيات الادارة', code: 'BMN101', crd: 4, pre: 'لا يوجد' }, { name: 'مقدمة في الفلسفة', code: 'GHS101', crd: 3, pre: 'لا يوجد' }, { name: 'مقدمة في علم الاجتماع', code: 'GHS102', crd: 3, pre: 'لا يوجد' }, { name: 'أسس المحاسبة', code: 'BAC101', crd: 4, pre: 'لا يوجد' }, { name: 'الجبر الرياضي', code: 'GMA101', crd: 5, pre: 'لا يوجد' }, { name: 'اللغة الإنجليزية مستوى ٤', code: 'ENG4', crd: 3, pre: 'ENG3' }, ],
                    'الفصل الثاني': [ { name: 'إدارة مشاريع تقانة المعلومات', code: 'ISE302', crd: 5, pre: 'لا يوجد' }, { name: 'الرياضيات المتقطعة', code: 'GMA204', crd: 5, pre: 'لا يوجد' }, { name: 'خدمات الشبكات', code: 'INT202', crd: 5, pre: 'لا يوجد' }, { name: 'إدارة قواعد البيانات oracle 2', code: 'IIS406', crd: 6, pre: 'ENG3' }, { name: 'منصة لينوكس 2', code: 'IOS305', crd: 5, pre: 'ENG3' }, { name: 'منصة ويندوز 2', code: 'IOS304', crd: 5, pre: 'ENG3' }, ],
                    'الفصل الثالث': [ { name: 'اللغة الإنجليزية مستوى ٥', code: 'ENG5', crd: 3, pre: 'ENG4' }, { name: 'الاحتمالات والاحصاء', code: 'GMA205', crd: 5, pre: 'لا يوجد' }, { name: 'الشبكات اللاسلكية', code: 'INT203', crd: 6, pre: 'لا يوجد' }, { name: 'هندسة البرمجيات', code: 'ISE301', crd: 6, pre: 'لا يوجد' }, { name: 'مدخل الى التسويق', code: 'BMN202', crd: 4, pre: 'BMN101' }, { name: 'الخدمات المصرفية', code: 'BFB305', crd: 4, pre: 'لا يوجد' }, ],
                    'الفصل الرابع': [ { name: 'مبادئ التوجيه', code: 'INT204', crd: 6, pre: 'لا يوجد' }, { name: 'امن التطبيقات والمعطيات', code: 'IWB404', crd: 6, pre: 'ENG3' }, { name: 'امن الشبكات والبنية التحتية المعلوماتية', code: 'INT305', crd: 5, pre: 'ENG3' }, { name: 'المشروع', code: 'IP1405', crd: 12, pre: 'ISE302' }, ]
                }, colors: { card: 'hover:border-teal-500', text: 'text-teal-400', icon: 'text-teal-400' }
            },
            tab3: { // MIS Data
                semesters: {
                    'الفصل الأول': [ { name: 'اساسيات الإدارة', code: 'BMN101', crd: 4, pre: 'غير محدد' }, { name: 'مدخل الى علم الاقتصاد', code: 'BEC101', crd: 4, pre: 'غير محدد' }, { name: 'مدخل الى التسويق', code: 'BMN202', crd: 4, pre: 'غير محدد' }, { name: 'أسس المحاسبة', code: 'BAC101', crd: 4, pre: 'غير محدد' }, { name: 'هندسة البرمجيات', code: 'ISE301', crd: 6, pre: 'غير محدد' }, ],
                    'الفصل الثاني': [ { name: 'اقتصاد جزئي', code: 'BEC202', crd: 4, pre: 'غير محدد' }, { name: 'إدارة الموارد البشرية', code: 'BMN203', crd: 4, pre: 'غير محدد' }, { name: 'الاحتمالات والإحصاء', code: 'GMA205', crd: 5, pre: 'غير محدد' }, { name: 'اللغة الإنجليزية مستوى 4', code: 'ENG 4', crd: 3, pre: 'غير محدد' }, ],
                    'الفصل الثالث': [ { name: 'المحاسبة التحليلية', code: 'BAC202', crd: 4, pre: 'غير محدد' }, { name: 'أسس الإدارة المالية', code: 'BFB201', crd: 4, pre: 'غير محدد' }, { name: 'الإدارة الاستراتيجية', code: 'BMN306', crd: 4, pre: 'غير محدد' }, { name: 'بحوث العمليات', code: 'BQM202', crd: 4, pre: 'غير محدد' }, { name: 'امن التطبيقات والمعطيات', code: 'IWB404', crd: 6, pre: 'غير محدد' }, { name: 'الخدمات المصرفية', code: 'BFB305', crd: 4, pre: 'غير محدد' }, { name: 'إدارة قواعد البيانات Oracle 2', code: 'IIS406', crd: 6, pre: 'غير محدد' }, { name: 'اللغة الإنجليزية مستوى 5', code: 'ENG 5', crd: 3, pre: 'غير محدد' }, ],
                    'الفصل الرابع': [ { name: 'نظرية القرارات', code: 'BQM303', crd: 4, pre: 'غير محدد' }, { name: 'إدارة العمليات', code: 'BQM301', crd: 4, pre: 'غير محدد' }, { name: 'إدارة سلاسل التوريد', code: 'BMN305', crd: 4, pre: 'غير محدد' }, { name: 'تحليل البيانات', code: 'BQM305', crd: 4, pre: 'غير محدد' }, { name: 'إدارة المشاريع', code: 'BQM304', crd: 4, pre: 'غير محدد' }, { name: 'ريادة الأعمال وادارة الشركات', code: 'BMN308', crd: 4, pre: 'غير محدد' }, ],
                    'الفصل الخامس': [ { name: 'تقييم المشاريع ودراسة الجدوى', code: 'BAC303', crd: 4, pre: 'غير محدد' }, { name: 'المسؤولية الاجتماعية للشركات', code: 'BMN309', crd: 4, pre: 'غير محدد' }, { name: 'المشروع', code: 'IPM405', crd: 12, pre: 'غير محدد' }, ]
                }, colors: { card: 'hover:border-purple-500', text: 'text-purple-400', icon: 'text-purple-400' }
            }
        };

        // --- GPA CALCULATOR LOGIC ---
        const gpaCalculatorHTML = `
            <div id="tab4" class="tab-content">
                <div class="bg-gray-800 rounded-2xl shadow-lg p-6 md:p-8 max-w-6xl mx-auto">
                    <section id="program-selection" class="mb-6">
                        <h2 class="text-xl font-bold text-gray-300 mb-4 border-b-2 border-amber-500 pb-2">1. اختر برنامجك الدراسي</h2>
                        <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                            <div class="flex items-center"><input id="tic_gpa" type="radio" name="program" value="TIC" class="gpa-program-radio w-5 h-5 text-amber-600 bg-gray-700 border-gray-600 focus:ring-amber-500" checked><label for="tic_gpa" class="ms-2 text-lg font-medium text-gray-300">المعهد التقاني (TIC)</label></div>
                            <div class="flex items-center"><input id="isdn_gpa" type="radio" name="program" value="ISDN" class="gpa-program-radio w-5 h-5 text-amber-600 bg-gray-700 border-gray-600 focus:ring-amber-500"><label for="isdn_gpa" class="ms-2 text-lg font-medium text-gray-300">ترقية (ISDN)</label></div>
                            <div class="flex items-center"><input id="mis_gpa" type="radio" name="program" value="MIS" class="gpa-program-radio w-5 h-5 text-amber-600 bg-gray-700 border-gray-600 focus:ring-amber-500"><label for="mis_gpa" class="ms-2 text-lg font-medium text-gray-300">ترقية (MIS)</label></div>
                        </div>
                    </section>
                    <section id="courses-section" class="mb-6">
                        <h2 class="text-xl font-bold text-gray-300 mb-4 border-b-2 border-amber-500 pb-2">2. حدد المواد وأدخل العلامات</h2>
                        <div id="gpa-courses-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                    </section>
                    <section class="sticky bottom-0 bg-gray-800/80 backdrop-blur-sm py-4 -mx-8 px-8 rounded-b-2xl">
                        <div class="flex justify-center items-center gap-8">
                            <button id="calculate-btn" class="bg-amber-600 text-white font-bold py-3 px-10 rounded-lg hover:bg-amber-700 focus:outline-none focus:ring-4 focus:ring-amber-300 transition-transform transform hover:scale-105">احسب المعدل</button>
                            <div id="results-section" class="hidden result-card bg-gray-900/50 text-center p-3 rounded-2xl border-2 border-gray-700 flex-grow">
                                <div id="results-output" class="hidden">
                                    <div class="flex justify-around items-center">
                                        <div>
                                            <p class="text-sm text-gray-400">المعدل</p>
                                            <p id="gpa-result" class="text-3xl font-bold text-amber-400">0.00</p>
                                        </div>
                                        <p id="gpa-message" class="text-xl font-semibold"></p>
                                    </div>
                                </div>
                                <div id="error-output" class="hidden">
                                    <p id="error-message" class="text-red-400 font-bold text-lg"></p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>`;
        
        const gpaCoursesData = {
            TIC: [ { code: 'GBS101', name: 'مهارات الحاسوب', credits: 4 }, { code: 'GBS103', name: 'مقدمة في التعليم الإلكتروني', credits: 4 }, { code: 'GMA101', name: 'التحليل الرياضي', credits: 4 }, { code: 'IPG101', name: 'مقدمة في البرمجة', credits: 5 }, { code: 'IIS101', name: 'مقدمة في نمذجة المعطيات', credits: 4 }, { code: 'IWB101', name: 'تقانات التجارة الإلكترونية', credits: 5 }, { code: 'Eng1', name: 'اللغة الإنكليزية مستوى 1', credits: 3 }, { code: 'IPG202', name: 'البرمجة الإجرائية', credits: 5 }, { code: 'INT101', name: 'مقدمة في الشبكات', credits: 5 }, { code: 'IOS101', name: 'مقدمة في نظم التشغيل', credits: 5 }, { code: 'GDE101', name: 'إلكترونيات رقمية', credits: 5 }, { code: 'IIS201', name: 'تصميم وبنيان قواعد المعطيات', credits: 5 }, { code: 'Eng2', name: 'اللغة الإنكليزية مستوى 2', credits: 3 }, { code: 'GBS102', name: 'تحضير السيرة المهنية', credits: 3 }, { code: 'IWB201', name: 'تصميم وتطوير تطبيقات الويب', credits: 6 }, { code: 'IOS201', name: 'نظم التشغيل الشبكية', credits: 6 }, { code: 'IPG201', name: 'البرمجة مقادة بالأحداث', credits: 6 }, { code: 'IPG203', name: 'التصميم والبرمجة غرضية التوجه', credits: 6 }, { code: 'IIS202', name: 'البرمجة المتقدمة بلغة SQL', credits: 6 }, { code: 'Eng3', name: 'اللغة الإنكليزية مستوى 3', credits: 3 }, { code: 'IOS202', name: 'منصة ويندوز', credits: 5 }, { code: 'IOS203', name: 'منصة لينوكس', credits: 6 }, { code: 'IIS303', name: 'إدارة قواعد بيانات MS-SQL Server', credits: 6 }, { code: 'IIS203', name: 'إدارة قواعد بيانات Oracle', credits: 6 }, { code: 'IPG204', name: 'برمجة التطبيقات النقالة', credits: 6 }, { code: 'IPI201', name: 'مشروع', credits: 12 } ],
            ISDN: [ { code: 'BMN101', name: 'أساسيات الإدارة', credits: 4 }, { code: 'GHS101', name: 'مقدمة في الفلسفة', credits: 3 }, { code: 'GHS102', name: 'مقدمة في علم الاجتماع', credits: 3 }, { code: 'BAC101', name: 'أسس المحاسبة', credits: 4 }, { code: 'GMA101', name: 'الجبر الرياضي', credits: 5 }, { code: 'ENG4', name: 'اللغة الإنكليزية مستوى 4', credits: 3 }, { code: 'ISE302', name: 'إدارة مشاريع تقانة المعلومات', credits: 5 }, { code: 'GMA204', name: 'الرياضيات المتقطعة', credits: 5 }, { code: 'INT202', name: 'خدمات الشبكات', credits: 5 }, { code: 'IIS406', name: 'إدارة قواعد البيانات أوراكل 2', credits: 6 }, { code: 'IOS305', name: 'منصة لينكس 2', credits: 5 }, { code: 'ENG5', name: 'اللغة الإنكليزية مستوى 5', credits: 3 }, { code: 'GMA205', name: 'الاحتمالات والإحصاء', credits: 5 }, { code: 'INT203', name: 'الشبكات اللاسلكية', credits: 6 }, { code: 'ISE301', name: 'هندسة البرمجيات', credits: 6 }, { code: 'BMN202', name: 'مدخل إلى التسويق', credits: 4 }, { code: 'IOS304', name: 'منصة ويندوز 2', credits: 5 }, { code: 'BFB305', name: 'الخدمات المصرفية', credits: 4 }, { code: 'INT204', name: 'مبادئ التوجيه', credits: 6 }, { code: 'IWB404', name: 'أمن التطبيقات والمعطيات', credits: 6 }, { code: 'INT305', name: 'أمن الشبكات والبنية التحتية المعلوماتية', credits: 5 }, { code: 'IPI405', name: 'مشروع', credits: 12 }, ],
            MIS: [ { name: 'اساسيات الإدارة', code: 'BMN101', credits: 4 }, { name: 'مدخل الى علم الاقتصاد', code: 'BEC101', credits: 4 }, { name: 'مدخل الى التسويق', code: 'BMN202', credits: 4 }, { name: 'أسس المحاسبة', code: 'BAC101', credits: 4 }, { name: 'هندسة البرمجيات', code: 'ISE301', credits: 6 }, { name: 'اقتصاد جزئي', code: 'BEC202', credits: 4 }, { name: 'إدارة الموارد البشرية', code: 'BMN203', credits: 4 }, { name: 'الاحتمالات والإحصاء', code: 'GMA205', credits: 5 }, { name: 'اللغة الإنجليزية مستوى 4', code: 'ENG 4', credits: 3 }, { name: 'المحاسبة التحليلية', code: 'BAC202', credits: 4 }, { name: 'أسس الإدارة المالية', code: 'BFB201', credits: 4 }, { name: 'الإدارة الاستراتيجية', code: 'BMN306', credits: 4 }, { name: 'بحوث العمليات', code: 'BQM202', credits: 4 }, { name: 'امن التطبيقات والمعطيات', code: 'IWB404', credits: 6 }, { name: 'الخدمات المصرفية', code: 'BFB305', credits: 4 }, { name: 'إدارة قواعد البيانات Oracle 2', code: 'IIS406', credits: 6 }, { name: 'اللغة الإنجليزية مستوى 5', code: 'ENG 5', credits: 3 }, { name: 'نظرية القرارات', code: 'BQM303', credits: 4 }, { name: 'إدارة العمليات', code: 'BQM301', credits: 4 }, { name: 'إدارة سلاسل التوريد', code: 'BMN305', credits: 4 }, { name: 'تحليل البيانات', code: 'BQM305', credits: 4 }, { name: 'إدارة المشاريع', code: 'BQM304', credits: 4 }, { name: 'ريادة الأعمال وادارة الشركات', code: 'BMN308', credits: 4 }, { name: 'تقييم المشاريع ودراسة الجدوى', code: 'BAC303', credits: 4 }, { name: 'المسؤولية الاجتماعية للشركات', code: 'BMN309', credits: 4 }, { name: 'المشروع', code: 'IPM405', credits: 12 } ]
        };

        function initializeGpaCalculator() {
            const gpaTab = document.getElementById('tab4');
            const programRadios = gpaTab.querySelectorAll('.gpa-program-radio');
            const coursesListDiv = gpaTab.querySelector('#gpa-courses-list');
            const calculateBtn = gpaTab.querySelector('#calculate-btn');
            const resultsSection = gpaTab.querySelector('#results-section');
            const resultsOutputDiv = gpaTab.querySelector('#results-output');
            const errorOutputDiv = gpaTab.querySelector('#error-output');
            const gpaResultP = gpaTab.querySelector('#gpa-result');
            const gpaMessageP = gpaTab.querySelector('#gpa-message');
            const errorMessageP = gpaTab.querySelector('#error-message');

            const createGpaCard = (course) => {
                const card = document.createElement('div');
                card.className = 'gpa-card card bg-gray-800 p-4 rounded-xl border-2 border-gray-700 transition-all duration-300 cursor-pointer';
                card.innerHTML = `
                    <div class="flex items-start justify-between">
                        <div class="flex-grow">
                            <h3 class="font-bold text-lg text-amber-400 mb-1">${course.name}</h3>
                            <p class="text-gray-400 text-sm">${course.code} (${course.credits} ساعات)</p>
                        </div>
                        <input type="checkbox" data-credits="${course.credits}" class="course-checkbox w-5 h-5 text-amber-600 bg-gray-600 border-gray-500 rounded focus:ring-amber-500 ms-2 mt-1 flex-shrink-0">
                    </div>
                    <div class="mt-3">
                        <input type="number" min="58" max="100" placeholder="العلامة" class="course-grade w-full p-2 text-center border bg-gray-700 border-gray-600 rounded-md focus:ring-amber-500 focus:border-amber-500 hidden">
                    </div>`;
                
                const checkbox = card.querySelector('.course-checkbox');
                const gradeInput = card.querySelector('.course-grade');

                card.addEventListener('click', (e) => {
                    if (e.target !== checkbox && e.target !== gradeInput) {
                        checkbox.checked = !checkbox.checked;
                        checkbox.dispatchEvent(new Event('change'));
                    }
                });

                checkbox.addEventListener('change', () => {
                    if (checkbox.checked) {
                        card.classList.add('selected');
                        gradeInput.classList.remove('hidden');
                    } else {
                        card.classList.remove('selected');
                        gradeInput.classList.add('hidden');
                        gradeInput.value = '';
                    }
                });
                return card;
            };

            function populateCourses(programKey) {
                coursesListDiv.innerHTML = '';
                const courses = gpaCoursesData[programKey];
                if (!courses) return;
                courses.forEach(course => {
                    coursesListDiv.appendChild(createGpaCard(course));
                });
            }
            
            function hideMessages() {
                resultsSection.classList.add('hidden');
                resultsOutputDiv.classList.add('hidden');
                errorOutputDiv.classList.add('hidden');
            }

            function calculateGPA() {
                hideMessages();
                let totalCredits = 0, totalPoints = 0, hasError = false, courseSelected = false;
                
                coursesListDiv.querySelectorAll('.gpa-card').forEach(card => {
                    const checkbox = card.querySelector('.course-checkbox');
                    if (checkbox.checked) {
                        courseSelected = true;
                        const gradeInput = card.querySelector('.course-grade');
                        const grade = parseFloat(gradeInput.value);
                        const credits = parseFloat(checkbox.dataset.credits);
                        if (isNaN(grade) || grade < 58 || grade > 100) {
                            errorMessageP.textContent = 'الرجاء إدخال علامات صحيحة (بين 58 و 100).';
                            hasError = true;
                            gradeInput.classList.add('border-red-500');
                        } else {
                            gradeInput.classList.remove('border-red-500');
                            totalCredits += credits;
                            totalPoints += grade * credits;
                        }
                    }
                });

                resultsSection.classList.remove('hidden');
                if (hasError) { errorOutputDiv.classList.remove('hidden'); resultsOutputDiv.classList.add('hidden'); return; }
                if (!courseSelected) {
                    errorMessageP.textContent = 'الرجاء تحديد مادة واحدة على الأقل.';
                    errorOutputDiv.classList.remove('hidden');
                    resultsOutputDiv.classList.add('hidden');
                    return;
                }

                const gpa = totalCredits > 0 ? (totalPoints / totalCredits) : 0;
                resultsOutputDiv.classList.remove('hidden');
                errorOutputDiv.classList.add('hidden');
                gpaResultP.textContent = gpa.toFixed(2);

                let gpaMessage, msgClass;
                if (gpa >= 85) { [gpaMessage, msgClass] = ['ممتاز', 'text-purple-400']; }
                else if (gpa >= 75) { [gpaMessage, msgClass] = ['جيد جداً', 'text-blue-400']; }
                else if (gpa >= 60) { [gpaMessage, msgClass] = ['جيد', 'text-green-400']; }
                else { [gpaMessage, msgClass] = ['حظاً أوفر', 'text-orange-400']; }
                
                gpaMessageP.textContent = gpaMessage;
                gpaMessageP.className = `text-xl font-semibold ${msgClass}`;
                gpaResultP.className = `text-3xl font-bold ${msgClass}`;
            }

            function updateSelection() {
                const selectedProgramKey = gpaTab.querySelector('input[name="program"]:checked').value;
                populateCourses(selectedProgramKey);
                hideMessages();
            }

            programRadios.forEach(radio => radio.addEventListener('change', updateSelection));
            calculateBtn.addEventListener('click', calculateGPA);
            updateSelection();
        }

        // --- MAIN APP LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');
            const tabs = document.querySelectorAll('.tab-btn');
            const disclaimer = document.getElementById('disclaimer-note');
            const modal = document.getElementById('course-modal');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            const createCard = (course, colors) => {
                const card = document.createElement('div');
                card.className = `card bg-gray-800 p-6 rounded-xl border border-gray-700 ${colors.card} transition-all duration-300 transform hover:-translate-y-1 cursor-pointer`;
                card.innerHTML = `
                    <div><h3 class="font-bold text-xl ${colors.text} mb-2">${course.name}</h3><p class="text-gray-400 mb-4">${course.code}</p></div>
                    <div class="mt-auto pt-4 border-t border-gray-700/50 text-sm space-y-2">
                        <div class="flex items-center gap-2 text-gray-300"><svg class="h-4 w-4 ${colors.icon}" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span><b>الساعات:</b> ${course.crd}</span></div>
                        <div class="flex items-center gap-2 text-gray-300"><svg class="h-4 w-4 ${colors.icon}" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span><b>الأسبقيات:</b> ${course.pre}</span></div>
                    </div>`;
                card.addEventListener('click', () => showModal(course));
                return card;
            };
            
            const showModal = (course) => {
                document.getElementById('modal-title').textContent = course.name;
                document.getElementById('modal-code').textContent = course.code;
                document.getElementById('modal-description').textContent = course.description;
                document.getElementById('modal-telegram-link').href = course.telegramLink;
                modal.classList.remove('hidden');
                modal.classList.add('flex');
            };

            const hideModal = () => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            };

            modalCloseBtn.addEventListener('click', hideModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    hideModal();
                }
            });


            const renderCurriculum = (tabId) => {
                const data = curriculumData[tabId];
                if (!data) return '';
                let contentHtml = `<div id="${tabId}" class="tab-content">`;
                for (const semesterName in data.semesters) {
                    contentHtml += `<h2 class="semester-title">${semesterName}</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">`;
                    // This is a temporary container to parse the HTML and attach events
                    const tempDiv = document.createElement('div');
                    data.semesters[semesterName].forEach(course => {
                        if (tabId === 'tab1') { // Only TIC courses are clickable
                            tempDiv.appendChild(createCard(course, data.colors));
                        } else {
                            // For other tabs, just render the HTML without event listeners
                            const cardHTML = `
                                <div class="card bg-gray-800 p-6 rounded-xl border border-gray-700 ${data.colors.card} transition-all duration-300 transform hover:-translate-y-1">
                                    <div><h3 class="font-bold text-xl ${data.colors.text} mb-2">${course.name}</h3><p class="text-gray-400 mb-4">${course.code}</p></div>
                                    <div class="mt-auto pt-4 border-t border-gray-700/50 text-sm space-y-2">
                                        <div class="flex items-center gap-2 text-gray-300"><svg class="h-4 w-4 ${data.colors.icon}" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span><b>الساعات:</b> ${course.crd}</span></div>
                                        <div class="flex items-center gap-2 text-gray-300"><svg class="h-4 w-4 ${data.colors.icon}" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span><b>الأسبقيات:</b> ${course.pre}</span></div>
                                    </div>
                                </div>`;
                            tempDiv.innerHTML += cardHTML;
                        }
                    });
                     contentHtml += tempDiv.innerHTML;
                    contentHtml += '</div>';
                }
                contentHtml += '</div>';
                return contentHtml;
            };

            const switchTab = (tabId) => {
                if (tabId === 'tab4') {
                    mainContent.innerHTML = gpaCalculatorHTML;
                    initializeGpaCalculator();
                    disclaimer.style.display = 'none';
                } else {
                    mainContent.innerHTML = renderCurriculum(tabId);
                    // Re-attach event listeners for newly created TIC cards
                    if (tabId === 'tab1') {
                        const data = curriculumData.tab1;
                        const cards = mainContent.querySelectorAll('.card');
                        let courseIndex = 0;
                        for (const semesterName in data.semesters) {
                            data.semesters[semesterName].forEach(course => {
                                if (cards[courseIndex]) {
                                    cards[courseIndex].addEventListener('click', () => showModal(course));
                                }
                                courseIndex++;
                            });
                        }
                    }
                    disclaimer.style.display = 'block';
                }
                
                mainContent.querySelector('.tab-content').classList.add('active');
                
                tabs.forEach(tab => {
                    tab.classList.remove('active');
                    tab.style.backgroundColor = '';
                });

                const activeBtn = document.querySelector(`[data-tab="${tabId}"]`);
                if (activeBtn) {
                    activeBtn.classList.add('active');
                    const colors = { tab1: '#2563eb', tab2: '#0d9488', tab3: '#7e22ce', tab4: '#d97706' };
                    activeBtn.style.backgroundColor = colors[tabId];
                }
            };

            tabs.forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab.dataset.tab));
            });

            switchTab('tab1');
        });
    </script>
</body>
</html>
