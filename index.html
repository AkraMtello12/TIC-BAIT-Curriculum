<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIC Society</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #f3f4f6; /* gray-100 */
            --bg-secondary: #ffffff; /* white */
            --bg-tertiary: #e5e7eb; /* gray-200 */
            --bg-hover: #d1d5db; /* gray-300 */
            --text-primary: #1f2937; /* gray-800 */
            --text-secondary: #4b5563; /* gray-600 */
            --text-tertiary: #6b7280; /* gray-500 */
            --border-color: #d1d5db; /* gray-300 */
        }

        .dark {
            --bg-primary: #111827; /* gray-900 */
            --bg-secondary: #1f2937; /* gray-800 */
            --bg-tertiary: #374151; /* gray-700 */
            --bg-hover: #4b5563; /* gray-600 */
            --text-primary: #f9fafb; /* gray-50 */
            --text-secondary: #d1d5db; /* gray-300 */
            --text-tertiary: #9ca3af; /* gray-400 */
            --border-color: #4b5563; /* gray-600 */
        }

        body { 
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        .tab-btn { color: var(--text-secondary); }
        .tab-btn:hover { background-color: var(--bg-tertiary); }
        .tab-btn.active { color: white; box-shadow: 0 4px 14px 0 rgba(0, 0, 0, 0.2); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .semester-title { font-size: 1.75rem; font-weight: 700; margin-bottom: 1.5rem; margin-top: 2rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--bg-tertiary); }
        #tab1 .semester-title { color: #60a5fa; } /* blue-400 */
        #tab2 .semester-title { color: #2dd4bf; } /* teal-400 */
        #tab3 .semester-title { color: #c084fc; } /* purple-400 */
        #tab4 .semester-title { color: #f59e0b; } /* amber-500 */
        .grid { display: grid; align-items: stretch; }
        .card { display: flex; flex-direction: column; justify-content: space-between; background-color: var(--bg-secondary); border-color: var(--bg-tertiary); transition: all 0.3s ease; }
        .result-card { transition: all 0.4s ease-in-out; }
        .gpa-card.selected { border-color: #f59e0b; transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(245, 158, 11, 0.1), 0 4px 6px -2px rgba(245, 158, 11, 0.05); }
        
        /* Modal Styles */
        #course-modal { backdrop-filter: blur(5px); }
        .modal-content { background-color: var(--bg-secondary); border-color: var(--border-color); animation: zoomIn 0.3s ease-out; }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

        /* Chatbot Styles */
        #faq-chatbot-window { transition: transform 0.3s ease-out, opacity 0.3s ease-out; background-color: var(--bg-secondary); }
        .faq-question { transition: background-color 0.2s; background-color: var(--bg-tertiary); }
        .faq-question:hover { background-color: rgba(79, 70, 229, 0.2); }
    </style>
</head>
<body>

    <div class="container mx-auto px-4 py-8 md:py-12">
        <div class="absolute top-5 right-5 z-50">
            <button id="theme-toggle" class="p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2" style="background-color: var(--bg-tertiary); border-color: var(--border-color);">
                <svg id="theme-toggle-dark-icon" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                <svg id="theme-toggle-light-icon" class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm-.707 7.072l.707-.707a1 1 0 10-1.414-1.414l-.707.707a1 1 0 101.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
            </button>
        </div>
        
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-teal-400 to-purple-400 pt-2">TIC</h1>
            <p class="text-lg" style="color: var(--text-secondary);">المعهد التقاني للحاسوب</p>
        </header>

        <div class="flex flex-col sm:flex-row justify-center items-center gap-2 md:gap-4 mb-8 p-2 rounded-xl max-w-5xl mx-auto" style="background-color: rgba(128, 128, 128, 0.1);">
            <button data-tab="tab1" class="tab-btn w-full sm:w-auto flex-1 font-semibold py-3 px-6 rounded-lg transition-all duration-300">TIC</button>
            <button data-tab="tab2" class="tab-btn w-full sm:w-auto flex-1 font-semibold py-3 px-6 rounded-lg transition-all duration-300">ترقية (ISDN)</button>
            <button data-tab="tab3" class="tab-btn w-full sm:w-auto flex-1 font-semibold py-3 px-6 rounded-lg transition-all duration-300">ترقية (MIS)</button>
            <button data-tab="tab4" class="tab-btn w-full sm:w-auto flex-1 font-semibold py-3 px-6 rounded-lg transition-all duration-300">حاسبة المعدل</button>
            <button data-tab="tab5" class="tab-btn w-full sm:w-auto flex-1 font-semibold py-3 px-6 rounded-lg transition-all duration-300">حاسبة المحصلة</button>
        </div>
        
        <div id="disclaimer-note" class="text-center max-w-2xl mx-auto mb-10">
            <div class="border rounded-lg p-4" style="background-color: rgba(45, 212, 191, 0.1); border-color: rgba(45, 212, 191, 0.3);">
                <p style="color: var(--text-secondary);"><b class="font-bold text-teal-400">ملاحظة:</b> تقسيم المواد على الفصول هو مجرد خطة مقترحة لضمان أفضل مسار تعليمي، ويمكن للطلاب تعديلها بما يتناسب مع ظروفهم الأكاديمية.</p>
            </div>
        </div>

        <main id="main-content">
            <!-- Content will be dynamically generated here by JavaScript -->
        </main>
    </div>
    
    <!-- Course Details Modal -->
    <div id="course-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 bg-black/70">
        <div class="modal-content relative rounded-2xl shadow-2xl w-full max-w-lg mx-auto overflow-hidden">
            <div id="modal-header" class="p-6">
                <h3 id="modal-title" class="text-2xl font-bold"></h3>
                <p id="modal-code" class="text-gray-400"></p>
            </div>
            <div class="p-6 pt-0">
                <p id="modal-description" class="leading-relaxed mb-6" style="color: var(--text-secondary);"></p>
                <a id="modal-telegram-link" href="#" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center w-full text-center bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-lg shadow-blue-500/20">
                    <svg class="w-5 h-5 me-2" fill="currentColor" viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.57c-.28 1.13-1.04 1.4-1.74.88L14.25 16l-2.45 2.22c-.28.27-.5.4-.86.4z"/></svg>
                    <span>الانضمام لمجموعة المادة</span>
                </a>
            </div>
             <button id="modal-close-btn" class="absolute top-4 left-4 text-gray-500 hover:text-white transition-colors rounded-full p-1" style="background-color: var(--bg-tertiary);">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
        </div>
    </div>

    <!-- FAQ Chatbot -->
    <div class="fixed bottom-5 left-5 z-40">
        <button id="faq-chatbot-toggle" class="bg-indigo-600 text-white rounded-full p-4 shadow-lg hover:bg-indigo-700 transition-transform transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-indigo-300">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
        </button>
        <div id="faq-chatbot-window" class="hidden absolute bottom-20 left-0 w-80 sm:w-96 border rounded-2xl shadow-2xl transform origin-bottom-left opacity-0" style="border-color: rgba(129, 140, 248, 0.3);">
            <div class="p-4 rounded-t-2xl flex justify-between items-center" style="background-color: var(--bg-tertiary);">
                <h3 class="font-bold text-lg text-indigo-400">الأسئلة الشائعة</h3>
                <button id="faq-close-btn" class="text-gray-400 hover:text-white">&times;</button>
            </div>
            <div id="faq-content" class="p-4 space-y-2 max-h-80 overflow-y-auto" style="background-color: var(--bg-secondary);">
                <!-- FAQ content will be generated here -->
            </div>
        </div>
    </div>


    <footer class="text-center py-8 mt-12 border-t" style="border-color: var(--bg-tertiary);">
        <p class="mb-4" style="color: var(--text-tertiary);">Developed by Akram Tello</p>
        <a href="https://t.me/AkraM_Tello" target="_blank" rel="noopener noreferrer" class="inline-block bg-teal-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-teal-600 transition-colors duration-300 shadow-lg shadow-teal-500/20">تواصل معي</a>
    </footer>

    <script>
        // --- DATA STORE (Curriculum Viewer) ---
        const curriculumData = {
            tab1: { // TIC
                semesters: {
                    'الفصل الأول': [ { name: 'مهارات الحاسوب', code: 'GBS101', crd: 4, pre: 'لا يوجد', description: 'يقدم هذا المقرر المهارات الأساسية لاستخدام الحاسوب وتطبيقاته المكتبية بكفاءة، بما يعادل شهادة (ICDL). ستتعلم استخدام معالجات النصوص، جداول البيانات، وقواعد البيانات، وهي أدوات أساسية لأي متخصص.', telegramLink: '#' }, { name: 'مقدمة في التعلم الإلكتروني', code: 'GBS103', crd: 4, pre: 'لا يوجد', description: 'صُمم هذا المقرر لتعريفك بآليات الدراسة في البيئة الافتراضية للجامعة. ستتعلم كيفية استخدام المنصات التعليمية بفعالية، وأفضل أساليب إدارة الوقت والتواصل الأكاديمي عبر الإنترنت.', telegramLink: '#' }, { name: 'التحليل الرياضي', code: 'GMA101', crd: 4, pre: 'لا يوجد', description: 'يغطي المقرر المفاهيم الرياضية الأساسية التي تعتبر ضرورية لدراسة علوم الحاسوب، مثل التوابع والمتتاليات والتفاضل والتكامل، والتي تساهم في تطوير القدرة على التفكير المنطقي وحل المشكلات.', telegramLink: '#' }, { name: 'مقدمة في البرمجة', code: 'IPG101', crd: 5, pre: 'لا يوجد', description: 'يركز هذا المقرر على المبادئ الأساسية للبرمجة والتفكير المنطقي. ستتعلم فيه كيفية تحليل المشكلات، تصميم الخوارزميات، وكتابة برامجك الأولى باستخدام لغة C#. الهدف هو بناء أساس برمجي متين للمقررات المتقدمة.', telegramLink: '#' }, { name: 'مقدمة في نمذجة المعطيات', code: 'IIS101', crd: 4, pre: 'لا يوجد', description: 'يتناول المقرر المفاهيم الأولية لتصميم قواعد البيانات. ستتعلم كيفية تحليل متطلبات البيانات وتصميم نماذج منطقية لها، مما يمثل الخطوة الأولى والأساسية في بناء أي نظام معلوماتي.', telegramLink: '#' }, { name: 'تقانات التجارة الإلكترونية', code: 'IWB101', crd: 5, pre: 'لا يوجد', description: 'يقدم هذا المقرر نظرة عامة على المفاهيم والتقنيات المستخدمة في عالم التجارة الإلكترونية، بما في ذلك نماذج الأعمال المختلفة، وأساليب التسويق الرقمي، وآليات الدفع عبر الإنترنت.', telegramLink: '#' }, ],
                    'الفصل الثاني': [ { name: 'البرمجة الإجرائية', code: 'IPG202', crd: 5, pre: 'IPG101', description: 'يعلمك هذا المقرر أساليب تنظيم الشيفرة البرمجية في البرامج الكبيرة عبر تقسيمها إلى وحدات وظيفية أصغر (إجراءات وتوابع)، مما يجعل الكود أكثر قابلية للقراءة والصيانة.', telegramLink: '#' }, { name: 'مقدمة في الشبكات', code: 'INT101', crd: 5, pre: 'GBS101', description: 'ستتعلم في هذا المقرر أساسيات شبكات الحاسوب، بما في ذلك أنواع الشبكات، ومكوناتها، والبروتوكولات الأساسية مثل (TCP/IP) التي تنظم عملية الاتصال ونقل البيانات بين الأجهزة.', telegramLink: '#' }, { name: 'مقدمة في نظم التشغيل', code: 'IOS101', crd: 5, pre: 'GBS101', description: 'يستعرض المقرر المكونات والوظائف الأساسية لأنظمة التشغيل، مثل إدارة الذاكرة، والعمليات، ونظام الملفات. الهدف هو فهم كيفية إدارة نظام التشغيل لموارد الحاسوب ليسمح للبرامج بالعمل بكفاءة.', telegramLink: '#' }, { name: 'إلكترونيات رقمية', code: 'GDE101', crd: 5, pre: 'لا يوجد', description: 'يتناول هذا المقرر المبادئ الأساسية للدوائر والأنظمة الرقمية، بما في ذلك البوابات المنطقية وأنظمة العد. الهدف هو فهم كيفية عمل المكونات الإلكترونية الدقيقة التي تشكل أساس بناء أجهزة الحاسوب.', telegramLink: '#' }, { name: 'تصميم وبنيان قواعد المعطيات', code: 'IIS201', crd: 5, pre: 'IIS101', description: 'ستتعمق في هذا المقرر في الجوانب المتقدمة لتصميم قواعد البيانات العلائقية، وكيفية تطبيق قواعد التسوية (Normalization) لضمان سلامة البيانات، بالإضافة إلى ترجمة التصاميم إلى جداول فعلية باستخدام لغة SQL.', telegramLink: '#' }, { name: 'لغة إنكليزية - مستوى أول', code: 'Eng1', crd: 3, pre: 'لا يوجد', description: 'يركز هذا المقرر على بناء أساس متين في اللغة الإنجليزية، حيث يغطي القواعد والمفردات الأساسية اللازمة لفهم النصوص التقنية البسيطة والتواصل بشكل فعال في بيئة العمل الأولية.', telegramLink: '#' }, ],
                    'الفصل الثالث': [ { name: 'تحضير السيرة المهنية', code: 'GBS102', crd: 3, pre: 'لا يوجد', description: 'يهدف المقرر إلى تزويدك بالمهارات اللازمة لدخول سوق العمل. ستتعلم التقنيات الصحيحة لكتابة السيرة الذاتية ورسائل التقديم، بالإضافة إلى استراتيجيات التحضير لمقابلات العمل وكيفية عرض مهاراتك بفعالية.', telegramLink: '#' }, { name: 'تصميم وتطوير تطبيقات الويب', code: 'IWB201', crd: 6, pre: 'IWB101/IIS101', description: 'يغطي المقرر دورة حياة تطوير تطبيقات الويب التفاعلية. ستتعلم تقنيات برمجة الواجهات الأمامية (Front-end) التي يراها المستخدم، وتقنيات برمجة الخادم (Back-end) التي تعالج البيانات والمنطق.', telegramLink: '#' }, { name: 'نظم التشغيل الشبكية', code: 'IOS201', crd: 6, pre: 'IOS101/INT101', description: 'يتناول المقرر أنظمة التشغيل المصممة لإدارة موارد الشبكة والخوادم. ستتعلم كيفية إعداد الخدمات الشبكية، إدارة المستخدمين والصلاحيات، وتأمين البيئات الشبكية.', telegramLink: '#' }, { name: 'البرمجة المقادة بالأحداث', code: 'IPG201', crd: 6, pre: 'IPG101', description: 'يركز المقرر على تطوير تطبيقات ذات واجهات مستخدم رسومية (GUI). ستتعلم كيفية تصميم النوافذ والأزرار والقوائم، وبرمجة استجابة التطبيق لتفاعلات المستخدم مثل نقرات الفأرة أو إدخال النص.', telegramLink: '#' }, { name: 'التصميم والبرمجة غرضية التوجه', code: 'IPG203', crd: 6, pre: 'IPG101', description: 'يقدم هذا المقرر منهجية البرمجة كائنية التوجه (OOP)، وهي طريقة متقدمة لتصميم البرمجيات تقوم على محاكاة الكائنات الواقعية. ستتعلم مفاهيم مثل الأصناف، الكائنات، والوراثة لبناء برامج مرنة وقابلة للتوسعة.', telegramLink: '#' }, { name: 'البرمجة المتقدمة بلغة SQL', code: 'IIS202', crd: 6, pre: 'IIS101', description: 'يهدف المقرر إلى تعميق معرفتك بلغة SQL، حيث ستتعلم كيفية كتابة استعلامات معقدة، واستخدام الوظائف المتقدمة، والإجراءات المخزنة لمعالجة البيانات وتحليلها بكفاءة عالية.', telegramLink: '#' }, { name: 'لغة إنكليزية - مستوى ثاني', code: 'Eng2', crd: 3, pre: 'Eng1', description: 'يبني هذا المقرر على مكتسبات المستوى الأول، حيث يتناول تراكيب لغوية أكثر تعقيدًا ومصطلحات تقنية متخصصة في مجال تكنولوجيا المعلومات، بهدف تحسين قدرة الطالب على فهم المقالات التقنية وكتابة التقارير.', telegramLink: '#' }, ],
                    'الفصل الرابع': [ { name: 'منصة ويندوز', code: 'IOS202', crd: 5, pre: 'IOS101/INT101/ENG3', description: 'يركز هذا المقرر على إدارة بيئات العمل والخوادم التي تعمل بنظام تشغيل Windows Server. ستكتسب مهارات عملية في إدارة الشبكات، المستخدمين، والخدمات الأساسية في بيئة ويندوز.', telegramLink: '#' }, { name: 'منصة لينوكس', code: 'IOS203', crd: 6, pre: 'IOS101/INT101/ENG3', description: 'ستتعلم في هذا المقرر أساسيات إدارة أنظمة التشغيل المستندة إلى Linux، بما في ذلك التعامل مع سطر الأوامر، إدارة الملفات والصلاحيات، وتثبيت البرامج، وهي مهارات أساسية للعمل مع الخوادم.', telegramLink: '#' }, { name: 'إدارة قواعد بيانات MS SQL Server', code: 'IIS303', crd: 6, pre: 'IIS201/IIS202/ENG3', description: 'يوفر هذا المقرر المهارات اللازمة لإدارة وصيانة أنظمة قواعد بيانات Microsoft SQL Server. ستغطي موضوعات مثل التثبيت، النسخ الاحتياطي والاستعادة، مراقبة الأداء، وتطبيق سياسات الأمان.', telegramLink: '#' }, { name: 'إدارة قواعد بيانات Oracle', code: 'IIS203', crd: 6, pre: 'IIS201/IIS202/ENG3', description: 'يركز المقرر على إدارة أنظمة قواعد بيانات Oracle، التي تستخدم على نطاق واسع في المؤسسات الكبرى. ستتعلم بنيتها المعمارية، وأدوات إدارتها، وكيفية تنفيذ مهام الصيانة والأمان الأساسية.', telegramLink: '#' }, { name: 'برمجة التطبيقات النقالة', code: 'IPG204', crd: 6, pre: 'IWB201', description: 'يقدم المقرر المفاهيم الأساسية لتطوير التطبيقات على الهواتف المحمولة. ستتعرف على خصائص بيئات الموبايل المختلفة، ودورة حياة التطبيق، وكيفية تصميم واجهات مستخدم مناسبة للشاشات الصغيرة.', telegramLink: '#' }, { name: 'مشروع', code: 'IPI201', crd: 12, pre: 'ENG3/IIS201/IWB201', description: 'في هذا المقرر التطبيقي، ستقوم بتوظيف جميع المهارات والمعارف التي اكتسبتها خلال دراستك لتطوير مشروع برمجي متكامل. ستمر بكافة مراحل تطوير البرمجيات، بدءًا من التحليل ووضع المتطلبات، وصولًا إلى التصميم والتنفيذ والاختبار، مما يمنحك خبرة عملية تحاكي بيئة العمل الحقيقية سواء قمت بتصميم موقع وب او تطبيق موبايل او تطبيق ديسكتوب....الخ', telegramLink: '#' }, { name: 'لغة إنكليزية - مستوى ثالث', code: 'Eng3', crd: 3, pre: 'Eng2', description: 'يهدف المقرر إلى الوصول بالطالب إلى مستوى متقدم من الكفاءة اللغوية، حيث يتم التدرب على فهم الوثائق التقنية المعقدة، والمشاركة في النقاشات التخصصية، وكتابة المراسلات والتقارير المهنية.', telegramLink: '#' }, ],
                }, colors: { card: 'hover:border-blue-500', text: 'text-blue-400', icon: 'text-blue-400' }
            },
            tab2: { // ISDN Data
                semesters: {
                    'الفصل الأول': [ { name: 'أساسيات الإدارة', code: 'BMN101', crd: 4, pre: 'لا يوجد', description: 'يتناول هذا المقرر مفهوم الإدارة وأهميتها، ويستعرض تطورها التاريخي وأهم المدارس الفكرية التي شكلتها. سيتعرف الطالب على الوظائف الإدارية الأساسية كالتخطيط والتنظيم والقيادة، بالإضافة إلى الوظائف الفنية في المنظمة مثل إدارة التسويق والموارد البشرية والمالية.' }, { name: 'مقدمة في الفلسفة', code: 'GHS101', crd: 3, pre: 'لا يوجد', description: 'يستعرض المقرر أهمية الفلسفة وتأثيرها، ويقدم عددًا من الفلسفات التي تطورت عبر التاريخ مثل البوذية والإغريقية. كما يتناول نظرية المعرفة وأدوات البحث العلمي وأفكار فلاسفة بارزين مثل كانت ونيتشه.' }, { name: 'مقدمة في علم الاجتماع', code: 'GHS102', crd: 3, pre: 'لا يوجد', description: 'يتناول المقرر مفاهيم أساسية مثل المنظور الاجتماعي، الثقافة، والبنية الاجتماعية. سيتعرف الطالب على تعريف الجماعات البشرية، مفهوم المجتمع المدني، وأثر مؤسسات كالدين والعائلة على المجتمع.' }, { name: 'أسس المحاسبة', code: 'BAC101', crd: 4, pre: 'لا يوجد', description: 'يهدف هذا المقرر إلى تعريف الطالب بوظيفة النظام المحاسبي في المؤسسة، ويشرح الدورة المحاسبية الكاملة. سيكتسب الطالب مهارة تسجيل العمليات المالية، وإجراء التسويات الجردية، وصولًا إلى إعداد الحسابات الختامية والقوائم المالية.' }, { name: 'الجبر الرياضي', code: 'GMA101', crd: 5, pre: 'لا يوجد', description: 'يغطي المقرر المفاهيم الأساسية في الجبر، حيث يتعرف الطالب على الأعداد الحقيقية والعقدية، والبنى الجبرية. كما يتناول موضوعات كثيرات الحدود، المصفوفات، والفضاءات الشعاعية اللازمة للدراسات التقنية.' }, { name: 'اللغة الإنجليزية مستوى ٤', code: 'ENG4', crd: 3, pre: 'ENG3', description: 'يبني هذا المقرر على المستويات السابقة لتعزيز الطلاقة اللغوية، مع التركيز على المصطلحات التقنية والإدارية المتقدمة. الهدف هو تمكين الطالب من قراءة دراسات الحالة والمقالات المتخصصة، وكتابة أجزاء من التقارير والمشاريع باللغة الإنجليزية.' }, ],
                    'الفصل الثاني': [ { name: 'خدمات الشبكات', code: 'INT202', crd: 5, pre: 'لا يوجد', description: 'يركز المقرر على أهم خدمات الإنترنت وبروتوكولاتها، حيث يتعرف الطالب على خدمة الويب (HTTP)، البريد الإلكتروني (SMTP, POP3)، بروتوكول نقل الملفات (FTP)، وخدمة المحادثة (CHAT).' }, { name: 'منصة لينوكس 2', code: 'IOS305', crd: 5, pre: 'ENG3', description: 'يركز المقرر على المهارات المتقدمة في إدارة أنظمة لينوكس، حيث يهدف إلى إتقان إدارة الخدمات الشبكية، ونظام الملفات، وشبكة النطاقات في بيئة لينوكس.' }, { name: 'الرياضيات المتقطعة', code: 'GMA204', crd: 5, pre: 'لا يوجد', description: 'يغطي المقرر المفاهيم الرياضية والمنطقية التي يحتاجها المتخصص في علوم الحاسوب. يتناول موضوعات كالاستقراء الرياضي، العبارات المكممة، ومبادئ الأوتومات التي تعتبر أساسية في مجال البرمجة وتحليل الخوارزميات.' }, { name: 'مدخل الى التسويق', code: 'BMN202', crd: 4, pre: 'BMN101', description: 'يغطي المقرر مفهوم التسويق وأهدافه، ويركز على تحليل البيئة التسويقية وسلوك المستهلك. سيتعلم الطالب كيفية تقسيم السوق، واختيار الأسواق المستهدفة، وتحديد عناصر المزيج التسويقي الأربعة: السلعة، السعر، التوزيع، والترويج.' }, { name: 'اللغة الإنجليزية مستوى ٥', code: 'ENG5', crd: 3, pre: 'ENG4', description: 'يهدف هذا المقرر إلى الوصول بالطالب إلى مستوى عالٍ من الإتقان، يمكنه من التواصل الاحترافي الكامل في بيئة العمل. يركز على صقل مهارات العرض التقديمي، كتابة التقارير المعقدة، والمشاركة الفعالة في الاجتماعات والمناقشات التقنية باللغة الإنجليزية.' } ],
                    'الفصل الثالث': [ { name: 'الشبكات اللاسلكية', code: 'INT203', crd: 6, pre: 'لا يوجد', description: 'يتضمن هذا المقرر دراسة طبقة التطبيقات الخاصة بشبكات الاتصالات اللاسلكية. سيتعرف الطالب على التقنيات المستخدمة في هذه الطبقة، بالإضافة إلى التعرف على بعض أنماط الشبكات اللاسلكية الشائعة.' }, { name: 'هندسة البرمجيات', code: 'ISE301', crd: 6, pre: 'لا يوجد', description: 'يتناول المقرر أساسيات ومراحل عملية تطوير البرمجيات، مع التركيز على دورة حياة المنتج البرمجي. سيتعلم الطالب كيفية تحديد المتطلبات، ونمذجة حالات الاستخدام، بالإضافة إلى التعرف على أنواع الاختبارات ومعايير جودة البرمجيات.' }, { name: 'إدارة مشاريع تقانة المعلومات', code: 'ISE302', crd: 5, pre: 'لا يوجد', description: 'يتناول المقرر أساسيات إدارة المشاريع التقنية، بدءًا من منهجيات التحليل والتصميم، وصولًا إلى إدارة الموارد البشرية ووضع الميزانيات. سيتعرف الطالب على أدوات إدارة المشاريع وكيفية تحضير دفاتر الشروط والمواصفات الفنية.' }, { name: 'الخدمات المصرفية', code: 'BFB305', crd: 4, pre: 'لا يوجد', description: 'يقدم المقرر إطارًا عامًا للعمل المصرفي ومختلف الخدمات التي يقدمها. سيتعرف الطالب على أنواع الحسابات، الاعتمادات المستندية، آليات الإقراض والتسليف، وخدمات الاستثمار وتأجير الخزائن الآمنة.' }, { name: 'إدارة قواعد البيانات oracle 2', code: 'IIS406', crd: 6, pre: 'ENG3', description: 'يركز هذا المقرر على المسؤوليات المتقدمة لمدير قاعدة بيانات أوراكل. سيتعلم الطالب إدارة عمليات خزن البيانات المتقدمة، وتطبيق سياسات الأمان المعقدة لضمان حماية وسلامة بيانات المؤسسة.' }, { name: 'الاحتمالات والإحصاء', code: 'GMA205', crd: 5, pre: 'لا يوجد', description: 'يقدم المقرر أساسيات علم الإحصاء وتطبيقاته، حيث يتعرف الطالب على مفاهيم الاحتمالات، حساب التشتت، والترابط. سيكتسب مهارات في تحليل المعطيات الاستكشافي، معالجة العينات، والتمييز بين الإحصاء الوصفي والاستقرائي.' } ],
                    'الفصل الرابع': [ { name: 'منصة ويندوز 2', code: 'IOS304', crd: 5, pre: 'ENG3', description: 'يهدف المقرر إلى إتقان المهارات المتقدمة في إدارة خوادم ويندوز، حيث يركز على إدارة الخدمات، ونطاقات ويندوز، وشبكة النطاقات بشكل احترافي.' }, { name: 'مبادئ التوجيه', code: 'INT204', crd: 6, pre: 'لا يوجد', description: 'يتناول المقرر موضوع التوجيه في الشبكات الحاسوبية، حيث يركز على فهم خوارزميات التوجيه في شبكات TCP/IP. سيكتسب الطالب خبرة في أهم بروتوكولات التوجيه المستخدمة، بالإضافة إلى التعرف على آليات التوجيه في الشبكات غير التقليدية.' }, { name: 'امن التطبيقات والمعطيات', code: 'IWB404', crd: 6, pre: 'ENG3', description: 'يتناول المقرر أساسيات بناء استراتيجية أمنية متكاملة لنظام المعلومات. سيتعرف الطالب على عمليات الاختراق الكلاسيكية للتطبيقات وأنظمة التشغيل، ونقاط الضعف الشائعة، بالإضافة إلى أساليب الحماية والمكافحة.' }, { name: 'امن الشبكات والبنية التحتية المعلوماتية', code: 'INT305', crd: 5, pre: 'ENG3', description: 'يستعرض المقرر أساليب وطرق حماية الشبكات المعلوماتية، حيث يغطي مبادئ الحماية، خوارزميات التشفير، بروتوكولات الحماية، وأساليب حماية الخدمات والمعلومات من الفيروسات والاختراقات.' }, { name: 'المشروع', code: 'IPI405', crd: 12, pre: 'ISE302', description: 'في هذا المقرر التطبيقي، يقوم الطالب بدمج معظم المعلومات التقنية والإدارية التي اكتسبها لتنفيذ مشروع عملي متكامل. يمر الطالب بجميع مراحل دورة حياة المنتج البرمجي من التحليل والتصميم إلى التنفيذ والاختبار ضمن بيئة عمل حقيقية.' }, ]
                }, colors: { card: 'hover:border-teal-500', text: 'text-teal-400', icon: 'text-teal-400' }
            },
            tab3: { // MIS Data
                semesters: {
                    'الفصل الأول': [ { name: 'أساسيات الإدارة', code: 'BMN101', crd: 4, pre: 'غير محدد', description: 'يتناول هذا المقرر مفهوم الإدارة وأهميتها، ويستعرض تطورها التاريخي وأهم المدارس الفكرية التي شكلتها. سيتعرف الطالب على الوظائف الإدارية الأساسية كالتخطيط والتنظيم والقيادة، بالإضافة إلى الوظائف الفنية في المنظمة مثل إدارة التسويق والموارد البشرية والمالية.' }, { name: 'مدخل إلى علم الاقتصاد', code: 'BEC101', crd: 4, pre: 'غير محدد', description: 'يقدم هذا المقرر المفاهيم التأسيسية في علم الاقتصاد، ويوضح آليات عمل السوق مثل قوانين العرض والطلب. سيتمكن الطالب من التمييز بين الاقتصاد الكلي والجزئي، والتعرف على أبرز المدارس والتيارات في الفكر الاقتصادي.' }, { name: 'مدخل إلى التسويق', code: 'BMN202', crd: 4, pre: 'غير محدد', description: 'يغطي المقرر مفهوم التسويق وأهدافه، ويركز على تحليل البيئة التسويقية وسلوك المستهلك. سيتعلم الطالب كيفية تقسيم السوق، واختيار الأسواق المستهدفة، وتحديد عناصر المزيج التسويقي الأربعة: السلعة، السعر، التوزيع، والترويج.' }, { name: 'أسس المحاسبة', code: 'BAC101', crd: 4, pre: 'غير محدد', description: 'يهدف هذا المقرر إلى تعريف الطالب بوظيفة النظام المحاسبي في المؤسسة، ويشرح الدورة المحاسبية الكاملة. سيكتسب الطالب مهارة تسجيل العمليات المالية، وإجراء التسويات الجردية، وصولًا إلى إعداد الحسابات الختامية والقوائم المالية.' }, { name: 'هندسة البرمجيات', code: 'ISE301', crd: 6, pre: 'غير محدد', description: 'يتناول المقرر أساسيات ومراحل عملية تطوير البرمجيات، مع التركيز على دورة حياة المنتج البرمجي. سيتعلم الطالب كيفية تحديد المتطلبات، ونمذجة حالات الاستخدام، بالإضافة إلى التعرف على أنواع الاختبارات ومعايير جودة البرمجيات.' }, ],
                    'الفصل الثاني': [ { name: 'اقتصاد جزئي', code: 'BEC202', crd: 4, pre: 'غير محدد', description: 'يركز هذا المقرر على النظريات الأساسية في الاقتصاد الجزئي، حيث يحلل سلوك المستهلك وسلوك المنتج في السوق. سيتعلم الطالب تطبيق المفاهيم المتعلقة بالمنفعة والإنتاج والتكاليف، وصولًا إلى فهم نظرية التوازن العام.' }, { name: 'إدارة الموارد البشرية', code: 'BMN203', crd: 4, pre: 'غير محدد', description: 'يستعرض المقرر الدور الاستراتيجي لوظيفة إدارة الموارد البشرية في المؤسسات. سيغطي موضوعات عملية مثل تحليل وتصنيف الوظائف، استقطاب واختيار الموظفين، تحديد الأجور، تقييم الأداء، والتدريب.' }, { name: 'الاحتمالات والإحصاء', code: 'GMA205', crd: 5, pre: 'غير محدد', description: 'يقدم المقرر أساسيات علم الإحصاء وتطبيقاته، حيث يتعرف الطالب على مفاهيم الاحتمالات، حساب التشتت، والترابط. سيكتسب مهارات في تحليل المعطيات الاستكشافي، معالجة العينات، والتمييز بين الإحصاء الوصفي والاستقرائي.' }, { name: 'اللغة الإنجليزية مستوى 4', code: 'ENG 4', crd: 3, pre: 'غير محدد', description: 'يبني هذا المقرر على المستويات السابقة لتعزيز الطلاقة اللغوية، مع التركيز على المصطلحات التقنية والإدارية المتقدمة. الهدف هو تمكين الطالب من قراءة دراسات الحالة والمقالات المتخصصة، وكتابة أجزاء من التقارير والمشاريع باللغة الإنجليزية.' }, ],
                    'الفصل الثالث': [ { name: 'المحاسبة التحليلية (محاسبة التكاليف)', code: 'BAC202', crd: 4, pre: 'غير محدد', description: 'يهدف المقرر إلى تعريف الطالب بمحاسبة التكاليف، حيث يركز على تحديد عناصر التكلفة وتبويبها. سيتعلم الطالب طرق قياس تكلفة المواد والعمل، وتوزيع التكاليف غير المباشرة، بالإضافة إلى تقويم المخزون السلعي.' }, { name: 'أسس الإدارة المالية', code: 'BFB201', crd: 4, pre: 'غير محدد', description: 'يتناول المقرر الوظيفة المالية في المنظمات، ويشرح مصادر وسياسات التمويل المتاحة. سيكتسب الطالب مهارة حساب وتحليل المؤشرات والنسب المالية، وتطبيق أساليب المفاضلة بين المشاريع الاستثمارية المختلفة.' }, { name: 'الإدارة الاستراتيجية', code: 'BMN306', crd: 4, pre: 'غير محدد', description: 'يقدم المقرر مفهوم الاستراتيجية وأبعادها، ويركز على عناصر الإدارة الاستراتيجية بدءًا من الرؤية والرسالة وصولًا إلى تقويم الأداء. سيتعلم الطالب استخدام أدوات التحليل الاستراتيجي مثل تحليل SWOT ونموذج BCG.' }, { name: 'بحوث العمليات', code: 'BQM202', crd: 4, pre: 'غير محدد', description: 'يعرف المقرر الطالب على مجال بحوث العمليات وتطبيقاته في حل المشكلات الإدارية. سيركز على تقنيات البرمجة الخطية، بالإضافة إلى تقديم المفاهيم الأساسية في نظريات البيانات، الأرتال، والألعاب الاستراتيجية.' }, { name: 'امن التطبيقات والمعطيات', code: 'IWB404', crd: 6, pre: 'غير محدد', description: 'يتناول المقرر أساسيات بناء استراتيجية أمنية متكاملة لنظام المعلومات. سيتعرف الطالب على عمليات الاختراق الكلاسيكية للتطبيقات وأنظمة التشغيل، ونقاط الضعف الشائعة، بالإضافة إلى أساليب الحماية والمكافحة.' }, { name: 'الخدمات المصرفية', code: 'BFB305', crd: 4, pre: 'غير محدد', description: 'يقدم المقرر إطارًا عامًا للعمل المصرفي ومختلف الخدمات التي يقدمها. سيتعرف الطالب على أنواع الحسابات، الاعتمادات المستندية، آليات الإقراض والتسليف، وخدمات الاستثمار وتأجير الخزائن الآمنة.' }, { name: 'إدارة قواعد البيانات Oracle 2', code: 'IIS406', crd: 6, pre: 'غير محدد', description: 'يركز هذا المقرر على المسؤوليات المتقدمة لمدير قاعدة بيانات أوراكل. سيتعلم الطالب إدارة عمليات خزن البيانات المتقدمة، وتطبيق سياسات الأمان المعقدة لضمان حماية وسلامة بيانات المؤسسة.' }, { name: 'اللغة الإنجليزية مستوى 5', code: 'ENG 5', crd: 3, pre: 'غير محدد', description: 'يهدف هذا المقرر إلى الوصول بالطالب إلى مستوى عالٍ من الإتقان، يمكنه من التواصل الاحترافي الكامل في بيئة العمل. يركز على صقل مهارات العرض التقديمي، كتابة التقارير المعقدة، والمشاركة الفعالة في الاجتماعات والمناقشات التقنية باللغة الإنجليزية.' }, ],
                    'الفصل الرابع': [ { name: 'نظرية القرارات', code: 'BQM303', crd: 4, pre: 'غير محدد', description: 'يتناول المقرر عملية صناعة القرار في العمل الإداري، ويصنف مسائل القرار المختلفة. سيتعلم الطالب مراحل اتخاذ القرار، ودور نظم المعلومات في دعمها، بالإضافة إلى تطبيق بعض التقنيات المساعدة مثل أشجار القرار.' }, { name: 'إدارة العمليات', code: 'BQM301', crd: 4, pre: 'غير محدد', description: 'يركز المقرر على وظيفة الإنتاج والعمليات في المؤسسة، ويصنف أنظمة الإنتاج المختلفة. سيتعلم الطالب أساليب تخطيط وتنظيم الإنتاج، إدارة المخزون، والتعرف على مفاهيم حديثة مثل الإنتاج الفوري (JIT).' }, { name: 'إدارة الإمداد (إدارة سلاسل التوريد)', code: 'BMN305', crd: 4, pre: 'غير محدد', description: 'يتناول المقرر وظيفة الإمداد والتخزين في المؤسسة، مع التركيز على إدارة المشتريات وعمليات التخزين. سيتعرف الطالب على مراحل عملية التوريد، وكيفية استخدام تقانات المعلومات لدعم هذه الوظيفة الحيوية.' }, { name: 'تحليل البيانات', code: 'BQM305', crd: 4, pre: 'غير محدد', description: 'يقدم المقرر طرق توصيف وتحليل البيانات، مع التركيز على مفهوم اختزال البيانات. سيتعلم الطالب تطبيق طرق التحليل العاملي، التحليل العنقودي، وغيرها، مع استخدام البرنامج الإحصائي SPSS في الجانب العملي.' }, { name: 'إدارة المشاريع', code: 'BQM304', crd: 4, pre: 'غير محدد', description: 'يعرف المقرر الطالب بمفهوم المشروع وخصوصية إدارته، مع التركيز على إدارة عناصره الأساسية (النطاق، الزمن، الكلفة، الجودة). سيتعلم الطالب تطبيق تقنيات التخطيط الزمني مثل مخططات GANTT واستخدام برمجيات متخصصة كـ MS-Project.' }, { name: 'ريادة الأعمال وإدارة الشركات المتوسطة والصغيرة', code: 'BMN308', crd: 4, pre: 'غير محدد', description: 'يتناول المقرر مفهوم ريادة الأعمال من منظور اقتصادي وإداري، ويستعرض السمات الأساسية لرائد الأعمال. سيتعلم الطالب كيفية بناء خطة عمل للمشاريع، وآليات تمويلها وتسويقها، ودور هذه المشاريع في التنمية الاقتصادية.' }, ],
                    'الفصل الخامس': [ { name: 'تقييم المشاريع ودراسة الجدوى', code: 'BAC303', crd: 4, pre: 'غير محدد', description: 'يغطي المقرر دورة حياة المشروع الاستثماري، ويركز على أهداف ومراحل إعداد دراسات الجدوى. سيتعلم الطالب كيفية إجراء الجدوى التسويقية، الفنية، والمالية، وتطبيق معايير تقييم المشاريع لاتخاذ قرارات استثمارية مدروسة.' }, { name: 'المسؤولية الاجتماعية للشركات وأخلاقيات العمل', code: 'BMN309', crd: 4, pre: 'غير محدد', description: 'يناقش المقرر مفهوم أخلاقيات العمل وعلاقتها بالمسؤولية الاجتماعية للمؤسسات. سيتعرف الطالب على الأبعاد المختلفة للمسؤولية (الاقتصادية، الاجتماعية، البيئية) والأخلاقيات المتصلة بمجالات التسويق والإنتاج والملكية الفكرية.' }, { name: 'المشروع', code: 'IPM405', crd: 12, pre: 'غير محدد', description: 'في هذا المقرر التطبيقي، يقوم الطالب بدمج معظم المعلومات التقنية والإدارية التي اكتسبها لتنفيذ مشروع عملي متكامل. يمر الطالب بجميع مراحل دورة حياة المنتج البرمجي من التحليل والتصميم إلى التنفيذ والاختبار ضمن بيئة عمل حقيقية.' }, ]
                }, colors: { card: 'hover:border-purple-500', text: 'text-purple-400', icon: 'text-purple-400' }
            }
        };

        // --- GPA CALCULATOR LOGIC ---
        const gpaCalculatorHTML = `
            <div id="tab4" class="tab-content">
                <div class="rounded-2xl shadow-lg p-6 md:p-8 max-w-6xl mx-auto" style="background-color: var(--bg-secondary);">
                    <section id="program-selection" class="mb-6">
                        <h2 class="text-xl font-bold mb-4 border-b-2 pb-2" style="color: var(--text-primary); border-color: var(--accent-color);">1. اختر برنامجك الدراسي</h2>
                        <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                            <div class="flex items-center"><input id="tic_gpa" type="radio" name="program" value="TIC" class="gpa-program-radio w-5 h-5 text-amber-600 bg-gray-700 border-gray-600 focus:ring-amber-500" checked><label for="tic_gpa" class="ms-2 text-lg font-medium">المعهد التقاني (TIC)</label></div>
                            <div class="flex items-center"><input id="isdn_gpa" type="radio" name="program" value="ISDN" class="gpa-program-radio w-5 h-5 text-amber-600 bg-gray-700 border-gray-600 focus:ring-amber-500"><label for="isdn_gpa" class="ms-2 text-lg font-medium">ترقية (ISDN)</label></div>
                            <div class="flex items-center"><input id="mis_gpa" type="radio" name="program" value="MIS" class="gpa-program-radio w-5 h-5 text-amber-600 bg-gray-700 border-gray-600 focus:ring-amber-500"><label for="mis_gpa" class="ms-2 text-lg font-medium">ترقية (MIS)</label></div>
                        </div>
                    </section>
                    <section id="courses-section" class="mb-6">
                        <h2 class="text-xl font-bold mb-4 border-b-2 pb-2" style="color: var(--text-primary); border-color: var(--accent-color);">2. حدد المواد وأدخل العلامات</h2>
                        <div id="gpa-courses-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                    </section>
                     <section id="target-gpa-section" class="mb-6">
                        <h2 class="text-xl font-bold mb-4 border-b-2 pb-2" style="color: var(--text-primary); border-color: var(--accent-color);">3. حاسبة الهدف</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 p-4 rounded-lg" style="background-color: var(--bg-primary);">
                            <div>
                                <label for="current-gpa" class="block text-sm font-medium mb-1" style="color: var(--text-secondary);">معدلك الحالي</label>
                                <input type="number" id="current-gpa" step="0.01" min="0" max="100" class="w-full p-2 text-center border rounded-md" style="background-color: var(--bg-secondary); border-color: var(--border-color);" placeholder="e.g., 75.5">
                            </div>
                            <div>
                                <label for="completed-credits" class="block text-sm font-medium mb-1" style="color: var(--text-secondary);">الساعات المنجزة</label>
                                <input type="number" id="completed-credits" min="0" class="w-full p-2 text-center border rounded-md" style="background-color: var(--bg-secondary); border-color: var(--border-color);" placeholder="e.g., 60">
                            </div>
                            <div>
                                <label for="target-gpa" class="block text-sm font-medium mb-1" style="color: var(--text-secondary);">المعدل الهدف</label>
                                <input type="number" id="target-gpa" step="0.01" min="0" max="100" class="w-full p-2 text-center border rounded-md" style="background-color: var(--bg-secondary); border-color: var(--border-color);" placeholder="e.g., 80">
                            </div>
                        </div>
                         <div id="target-result-section" class="hidden mt-4 text-center p-4 rounded-lg"></div>
                    </section>
                    <section class="sticky bottom-0 py-4 -mx-8 px-8 rounded-b-2xl" style="background-color: var(--bg-secondary); border-top: 1px solid var(--border-color);">
                        <div class="flex justify-center items-center gap-8">
                            <button id="calculate-btn" class="bg-amber-600 text-white font-bold py-3 px-10 rounded-lg hover:bg-amber-700 focus:outline-none focus:ring-4 focus:ring-amber-300 transition-transform transform hover:scale-105">احسب المعدل</button>
                            <div id="results-section" class="hidden result-card p-3 rounded-2xl border-2 flex-grow" style="background-color: var(--bg-primary); border-color: var(--border-color);">
                                <div id="results-output" class="hidden">
                                    <div class="flex justify-around items-center">
                                        <div>
                                            <p class="text-sm" style="color: var(--text-secondary);">المعدل</p>
                                            <p id="gpa-result" class="text-3xl font-bold text-amber-500">0.00</p>
                                        </div>
                                        <p id="gpa-message" class="text-xl font-semibold"></p>
                                    </div>
                                </div>
                                <div id="error-output" class="hidden">
                                    <p id="error-message" class="text-red-500 font-bold text-lg"></p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>`;
        
        const gpaCoursesData = {
            TIC: [ { code: 'GBS101', name: 'مهارات الحاسوب', credits: 4 }, { code: 'GBS103', name: 'مقدمة في التعليم الإلكتروني', credits: 4 }, { code: 'GMA101', name: 'التحليل الرياضي', credits: 4 }, { code: 'IPG101', name: 'مقدمة في البرمجة', credits: 5 }, { code: 'IIS101', name: 'مقدمة في نمذجة المعطيات', credits: 4 }, { code: 'IWB101', name: 'تقانات التجارة الإلكترونية', credits: 5 }, { code: 'Eng1', name: 'اللغة الإنكليزية مستوى 1', credits: 3 }, { code: 'IPG202', name: 'البرمجة الإجرائية', credits: 5 }, { code: 'INT101', name: 'مقدمة في الشبكات', credits: 5 }, { code: 'IOS101', name: 'مقدمة في نظم التشغيل', credits: 5 }, { code: 'GDE101', name: 'إلكترونيات رقمية', credits: 5 }, { code: 'IIS201', name: 'تصميم وبنيان قواعد المعطيات', credits: 5 }, { code: 'Eng2', name: 'اللغة الإنكليزية مستوى 2', credits: 3 }, { code: 'GBS102', name: 'تحضير السيرة المهنية', credits: 3 }, { code: 'IWB201', name: 'تصميم وتطوير تطبيقات الويب', credits: 6 }, { code: 'IOS201', name: 'نظم التشغيل الشبكية', credits: 6 }, { code: 'IPG201', name: 'البرمجة مقادة بالأحداث', credits: 6 }, { code: 'IPG203', name: 'التصميم والبرمجة غرضية التوجه', credits: 6 }, { code: 'IIS202', name: 'البرمجة المتقدمة بلغة SQL', credits: 6 }, { code: 'Eng3', name: 'اللغة الإنكليزية مستوى 3', credits: 3 }, { code: 'IOS202', name: 'منصة ويندوز', credits: 5 }, { code: 'IOS203', name: 'منصة لينوكس', credits: 6 }, { code: 'IIS303', name: 'إدارة قواعد بيانات MS-SQL Server', credits: 6 }, { code: 'IIS203', name: 'إدارة قواعد بيانات Oracle', credits: 6 }, { code: 'IPG204', name: 'برمجة التطبيقات النقالة', credits: 6 }, { code: 'IPI201', name: 'مشروع', credits: 12 } ],
            ISDN: [ { code: 'BMN101', name: 'أساسيات الإدارة', credits: 4 }, { code: 'GHS101', name: 'مقدمة في الفلسفة', credits: 3 }, { code: 'GHS102', name: 'مقدمة في علم الاجتماع', credits: 3 }, { code: 'BAC101', name: 'أسس المحاسبة', credits: 4 }, { code: 'GMA101', name: 'الجبر الرياضي', credits: 5 }, { code: 'ENG4', name: 'اللغة الإنكليزية مستوى 4', credits: 3 }, { code: 'ISE302', name: 'إدارة مشاريع تقانة المعلومات', credits: 5 }, { code: 'GMA204', name: 'الرياضيات المتقطعة', credits: 5 }, { code: 'INT202', name: 'خدمات الشبكات', credits: 5 }, { code: 'IIS406', name: 'إدارة قواعد البيانات أوراكل 2', credits: 6 }, { code: 'IOS305', name: 'منصة لينكس 2', credits: 5 }, { code: 'ENG5', name: 'اللغة الإنكليزية مستوى 5', credits: 3 }, { code: 'GMA205', name: 'الاحتمالات والإحصاء', credits: 5 }, { code: 'INT203', name: 'الشبكات اللاسلكية', credits: 6 }, { code: 'ISE301', name: 'هندسة البرمجيات', credits: 6 }, { code: 'BMN202', name: 'مدخل إلى التسويق', credits: 4 }, { code: 'IOS304', name: 'منصة ويندوز 2', credits: 5 }, { code: 'BFB305', name: 'الخدمات المصرفية', credits: 4 }, { code: 'INT204', name: 'مبادئ التوجيه', credits: 6 }, { code: 'IWB404', name: 'أمن التطبيقات والمعطيات', credits: 6 }, { code: 'INT305', name: 'أمن الشبكات والبنية التحتية المعلوماتية', credits: 5 }, { code: 'IPI405', name: 'مشروع', credits: 12 }, ],
            MIS: [ { name: 'اساسيات الإدارة', code: 'BMN101', credits: 4 }, { name: 'مدخل الى علم الاقتصاد', code: 'BEC101', credits: 4 }, { name: 'مدخل الى التسويق', code: 'BMN202', credits: 4 }, { name: 'أسس المحاسبة', code: 'BAC101', credits: 4 }, { name: 'هندسة البرمجيات', code: 'ISE301', credits: 6 }, { name: 'اقتصاد جزئي', code: 'BEC202', credits: 4 }, { name: 'إدارة الموارد البشرية', code: 'BMN203', credits: 4 }, { name: 'الاحتمالات والإحصاء', code: 'GMA205', credits: 5 }, { name: 'اللغة الإنجليزية مستوى 4', code: 'ENG 4', credits: 3 }, { name: 'المحاسبة التحليلية', code: 'BAC202', credits: 4 }, { name: 'أسس الإدارة المالية', code: 'BFB201', credits: 4 }, { name: 'الإدارة الاستراتيجية', code: 'BMN306', credits: 4 }, { name: 'بحوث العمليات', code: 'BQM202', credits: 4 }, { name: 'امن التطبيقات والمعطيات', code: 'IWB404', credits: 6 }, { name: 'الخدمات المصرفية', code: 'BFB305', credits: 4 }, { name: 'إدارة قواعد البيانات Oracle 2', code: 'IIS406', credits: 6 }, { name: 'اللغة الإنجليزية مستوى 5', code: 'ENG 5', credits: 3 }, { name: 'نظرية القرارات', code: 'BQM303', credits: 4 }, { name: 'إدارة العمليات', code: 'BQM301', credits: 4 }, { name: 'إدارة سلاسل التوريد', code: 'BMN305', credits: 4 }, { name: 'تحليل البيانات', code: 'BQM305', credits: 4 }, { name: 'إدارة المشاريع', code: 'BQM304', credits: 4 }, { name: 'ريادة الأعمال وادارة الشركات', code: 'BMN308', credits: 4 }, { name: 'تقييم المشاريع ودراسة الجدوى', code: 'BAC303', credits: 4 }, { name: 'المسؤولية الاجتماعية للشركات', code: 'BMN309', credits: 4 }, { name: 'المشروع', code: 'IPM405', credits: 12 } ]
        };
        
        // --- GRADE CALCULATOR LOGIC ---
        const gradeCalculatorHTML = `
            <div id="tab5" class="tab-content">
                <div class="rounded-2xl shadow-lg p-6 md:p-8 max-w-2xl mx-auto" style="background-color: var(--bg-secondary);">
                    <h2 class="text-2xl font-bold text-center mb-6" style="color: var(--text-primary);">حاسبة محصلة مادة</h2>
                    <div class="space-y-6">
                        <div>
                            <label class="flex items-center justify-center cursor-pointer">
                                <span class="text-lg font-medium" style="color: var(--text-secondary);">مادة عامة</span>
                                <input type="checkbox" id="is-english-checkbox" class="sr-only peer">
                                <div class="relative w-14 h-8 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-1 after:start-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-pink-600 mx-4"></div>
                                <span class="text-lg font-medium" style="color: var(--text-secondary);">لغة إنكليزية</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                            <div>
                                <label for="assignment-grade" class="block mb-2 text-sm font-medium" style="color: var(--text-secondary);">علامة الوظيفة (من 100)</label>
                                <input type="number" id="assignment-grade" min="0" max="100" class="w-full p-3 text-center border rounded-md focus:ring-pink-500 focus:border-pink-500" style="background-color: var(--bg-tertiary); border-color: var(--border-color);" placeholder="e.g., 85">
                            </div>
                            <div>
                                <label for="exam-grade" class="block mb-2 text-sm font-medium" style="color: var(--text-secondary);">علامة الامتحان (من 100)</label>
                                <input type="number" id="exam-grade" min="0" max="100" class="w-full p-3 text-center border rounded-md focus:ring-pink-500 focus:border-pink-500" style="background-color: var(--bg-tertiary); border-color: var(--border-color);" placeholder="e.g., 70">
                            </div>
                        </div>
                        <div class="text-center">
                            <button id="calculate-grade-btn" class="bg-pink-600 text-white font-bold py-3 px-10 rounded-lg hover:bg-pink-700 focus:outline-none focus:ring-4 focus:ring-pink-300 transition-transform transform hover:scale-105">احسب المحصلة</button>
                        </div>
                    </div>
                    <div id="grade-result-section" class="hidden mt-8"></div>
                </div>
            </div>`;

        // --- FAQ DATA ---
        const faqData = [
            {
                question: 'كيفية إيقاف أو تجميد فصل؟',
                answer: `
                    <p>يحق للطالب الإيقاف لمدة فصلين في مشواره الدراسي.</p>
                    <p class="mt-2"><strong>الحالة الأولى:</strong> يتم ذلك من خلال عدم تنزيله للمواد قبل بداية الفصل الذي يريد الإيقاف به.</p>
                    <p class="mt-2"><strong>الحالة الثانية:</strong> أما إذا قام الطالب بالتنزيل والدفع للمواد عندها يحق للطالب طلب إيقاف فصل من خلال إرسال بريد لشؤون الطلاب على <strong class="text-indigo-300">tic_coor@svuonline.org</strong> وطلب إيقاف فصل، ويتم ذلك في أول أسبوع من بداية الفصل الدراسي.</p>
                `
            }
        ];

        function initializeGpaCalculator() {
            const gpaTab = document.getElementById('tab4');
            if (!gpaTab) return;
            const programRadios = gpaTab.querySelectorAll('.gpa-program-radio');
            const coursesListDiv = gpaTab.querySelector('#gpa-courses-list');
            const calculateBtn = gpaTab.querySelector('#calculate-btn');
            const resultsSection = gpaTab.querySelector('#results-section');
            const resultsOutputDiv = gpaTab.querySelector('#results-output');
            const errorOutputDiv = gpaTab.querySelector('#error-output');
            const gpaResultP = gpaTab.querySelector('#gpa-result');
            const gpaMessageP = gpaTab.querySelector('#gpa-message');
            const errorMessageP = gpaTab.querySelector('#error-message');
            // Target GPA elements
            const currentGpaInput = gpaTab.querySelector('#current-gpa');
            const completedCreditsInput = gpaTab.querySelector('#completed-credits');
            const targetGpaInput = gpaTab.querySelector('#target-gpa');
            const targetResultSection = gpaTab.querySelector('#target-result-section');


            const createGpaCard = (course) => {
                const card = document.createElement('div');
                card.className = 'gpa-card card p-4 rounded-xl border-2 transition-all duration-300 cursor-pointer';
                card.innerHTML = `
                    <div class="flex items-start justify-between">
                        <div class="flex-grow">
                            <h3 class="font-bold text-lg text-amber-500 mb-1">${course.name}</h3>
                            <p class="text-sm" style="color: var(--text-tertiary);">${course.code} (${course.credits} ساعات)</p>
                        </div>
                        <input type="checkbox" data-credits="${course.credits}" class="course-checkbox w-5 h-5 text-amber-600 bg-gray-600 border-gray-500 rounded focus:ring-amber-500 ms-2 mt-1 flex-shrink-0">
                    </div>
                    <div class="mt-3">
                        <input type="number" min="58" max="100" placeholder="العلامة" class="course-grade w-full p-2 text-center border rounded-md hidden" style="background-color: var(--bg-tertiary); border-color: var(--border-color);">
                    </div>`;
                
                const checkbox = card.querySelector('.course-checkbox');
                const gradeInput = card.querySelector('.course-grade');

                card.addEventListener('click', (e) => {
                    if (e.target !== checkbox && e.target !== gradeInput) {
                        checkbox.checked = !checkbox.checked;
                        checkbox.dispatchEvent(new Event('change'));
                    }
                });

                checkbox.addEventListener('change', () => {
                    if (checkbox.checked) {
                        card.classList.add('selected');
                        gradeInput.classList.remove('hidden');
                    } else {
                        card.classList.remove('selected');
                        gradeInput.classList.add('hidden');
                        gradeInput.value = '';
                    }
                });
                return card;
            };

            function populateCourses(programKey) {
                coursesListDiv.innerHTML = '';
                const courses = gpaCoursesData[programKey];
                if (!courses) return;
                courses.forEach(course => {
                    coursesListDiv.appendChild(createGpaCard(course));
                });
            }
            
            function hideMessages() {
                resultsSection.classList.add('hidden');
                resultsOutputDiv.classList.add('hidden');
                errorOutputDiv.classList.add('hidden');
                targetResultSection.classList.add('hidden');
            }

            function calculateGPA() {
                hideMessages();
                let totalCredits = 0, totalPoints = 0, hasError = false, courseSelected = false;
                
                coursesListDiv.querySelectorAll('.gpa-card').forEach(card => {
                    const checkbox = card.querySelector('.course-checkbox');
                    if (checkbox.checked) {
                        courseSelected = true;
                        const gradeInput = card.querySelector('.course-grade');
                        const grade = parseFloat(gradeInput.value);
                        const credits = parseFloat(checkbox.dataset.credits);
                        if (isNaN(grade) || grade < 58 || grade > 100) {
                            errorMessageP.textContent = 'الرجاء إدخال علامات صحيحة (بين 58 و 100).';
                            hasError = true;
                            gradeInput.classList.add('border-red-500');
                        } else {
                            gradeInput.classList.remove('border-red-500');
                            totalCredits += credits;
                            totalPoints += grade * credits;
                        }
                    }
                });
                
                // --- Target GPA Calculation ---
                const currentGpa = parseFloat(currentGpaInput.value);
                const completedCredits = parseInt(completedCreditsInput.value);
                const targetGpa = parseFloat(targetGpaInput.value);

                if (!isNaN(currentGpa) && !isNaN(completedCredits) && !isNaN(targetGpa) && completedCredits > 0 && totalCredits > 0) {
                    const requiredTotalPoints = (completedCredits + totalCredits) * targetGpa;
                    const currentTotalPoints = currentGpa * completedCredits;
                    const neededPoints = requiredTotalPoints - currentTotalPoints;
                    const requiredAvg = neededPoints / totalCredits;

                    targetResultSection.classList.remove('hidden');
                    if (requiredAvg > 100) {
                        targetResultSection.className = 'mt-4 text-center p-4 rounded-lg bg-red-500/10 text-red-400';
                        targetResultSection.innerHTML = `للوصول إلى معدل <b>${targetGpa}</b>، تحتاج إلى تحقيق معدل <b>${requiredAvg.toFixed(2)}</b> في المواد المحددة، وهذا غير ممكن.`;
                    } else if (requiredAvg < 58) {
                         targetResultSection.className = 'mt-4 text-center p-4 rounded-lg bg-yellow-500/10 text-yellow-400';
                        targetResultSection.innerHTML = `للوصول إلى معدل <b>${targetGpa}</b>، تحتاج إلى تحقيق معدل <b>${requiredAvg.toFixed(2)}</b> في المواد المحددة، وهذا أقل من درجة النجاح.`;
                    }
                    else {
                        targetResultSection.className = 'mt-4 text-center p-4 rounded-lg bg-green-500/10 text-green-400';
                        targetResultSection.innerHTML = `للوصول إلى معدل <b>${targetGpa}</b>، تحتاج إلى تحقيق معدل <b>${requiredAvg.toFixed(2)}</b> في المواد المحددة.`;
                    }
                }


                resultsSection.classList.remove('hidden');
                if (hasError) { errorOutputDiv.classList.remove('hidden'); resultsOutputDiv.classList.add('hidden'); return; }
                if (!courseSelected) {
                    errorMessageP.textContent = 'الرجاء تحديد مادة واحدة على الأقل.';
                    errorOutputDiv.classList.remove('hidden');
                    resultsOutputDiv.classList.add('hidden');
                    return;
                }

                const gpa = totalCredits > 0 ? (totalPoints / totalCredits) : 0;
                resultsOutputDiv.classList.remove('hidden');
                errorOutputDiv.classList.add('hidden');
                gpaResultP.textContent = gpa.toFixed(2);

                let gpaMessage, msgClass;
                if (gpa >= 85) { [gpaMessage, msgClass] = ['ممتاز', 'text-purple-400']; }
                else if (gpa >= 75) { [gpaMessage, msgClass] = ['جيد جداً', 'text-blue-400']; }
                else if (gpa >= 60) { [gpaMessage, msgClass] = ['جيد', 'text-green-400']; }
                else { [gpaMessage, msgClass] = ['حظاً أوفر', 'text-orange-400']; }
                
                gpaMessageP.textContent = gpaMessage;
                gpaMessageP.className = `text-xl font-semibold ${msgClass}`;
                gpaResultP.className = `text-3xl font-bold ${msgClass}`;
            }

            function updateSelection() {
                const selectedProgramKey = gpaTab.querySelector('input[name="program"]:checked').value;
                populateCourses(selectedProgramKey);
                hideMessages();
            }

            programRadios.forEach(radio => radio.addEventListener('change', updateSelection));
            calculateBtn.addEventListener('click', calculateGPA);
            updateSelection();
        }

        function initializeGradeCalculator() {
            const gradeTab = document.getElementById('tab5');
            if (!gradeTab) return;
            const isEnglishCheckbox = gradeTab.querySelector('#is-english-checkbox');
            const assignmentInput = gradeTab.querySelector('#assignment-grade');
            const examInput = gradeTab.querySelector('#exam-grade');
            const calculateBtn = gradeTab.querySelector('#calculate-grade-btn');
            const resultSection = gradeTab.querySelector('#grade-result-section');

            calculateBtn.addEventListener('click', () => {
                const assignmentGrade = parseFloat(assignmentInput.value);
                const examGrade = parseFloat(examInput.value);
                const isEnglish = isEnglishCheckbox.checked;

                if (isNaN(assignmentGrade) || isNaN(examGrade) || assignmentGrade < 0 || assignmentGrade > 100 || examGrade < 0 || examGrade > 100) {
                    resultSection.innerHTML = `<div class="result-card p-6 rounded-2xl border-2 bg-red-500/10 border-red-500/30"><p class="text-red-400 font-bold text-lg">الرجاء إدخال علامات صحيحة بين 0 و 100.</p></div>`;
                    resultSection.classList.remove('hidden');
                    return;
                }

                let finalGrade, status, reason, colorClass;

                if (isEnglish) {
                    finalGrade = Math.ceil((assignmentGrade * 0.20) + (examGrade * 0.80));
                    if (examGrade < 40) {
                        status = 'راسب';
                        reason = 'علامة الامتحان أقل من 40، وهذا شرط حاسم للنجاح في مواد اللغة الإنكليزية.';
                        colorClass = 'red';
                    } else if (finalGrade < 50) {
                        status = 'راسب';
                        reason = 'المحصلة النهائية أقل من 50.';
                        colorClass = 'red';
                    } else {
                        status = 'ناجح';
                        reason = 'لقد حققت شروط النجاح: المحصلة 50 أو أكثر وعلامة الامتحان 40 أو أكثر.';
                        colorClass = 'green';
                    }
                } else {
                    finalGrade = Math.ceil((assignmentGrade * 0.25) + (examGrade * 0.75));
                    if (assignmentGrade < 40 || examGrade < 40) {
                        status = 'راسب';
                        reason = 'يجب ألا تقل علامة الوظيفة أو الامتحان عن 40.';
                        colorClass = 'red';
                    } else if (finalGrade < 58) {
                        status = 'راسب';
                        reason = 'المحصلة النهائية أقل من 58.';
                        colorClass = 'red';
                    } else if (finalGrade < 60) {
                        status = 'بحاجة لمساعدة';
                        reason = 'المحصلة بين 58 و 59، قد تنجح بالاستفادة من علامات المساعدة.';
                        colorClass = 'yellow';
                    } else {
                        status = 'ناجح';
                        reason = 'لقد حققت جميع شروط النجاح.';
                        colorClass = 'green';
                    }
                }

                const colorMap = {
                    red: { bg: 'bg-red-500/10', border: 'border-red-500/30', text: 'text-red-400' },
                    green: { bg: 'bg-green-500/10', border: 'border-green-500/30', text: 'text-green-400' },
                    yellow: { bg: 'bg-yellow-500/10', border: 'border-yellow-500/30', text: 'text-yellow-400' },
                };

                resultSection.innerHTML = `
                    <div class="result-card ${colorMap[colorClass].bg} text-center p-6 rounded-2xl border-2 ${colorMap[colorClass].border}">
                        <p class="text-lg mb-2" style="color: var(--text-secondary);">المحصلة النهائية:</p>
                        <p class="text-5xl font-bold ${colorMap[colorClass].text} mb-4">${finalGrade}</p>
                        <p class="text-2xl font-semibold ${colorMap[colorClass].text} mb-2">${status}</p>
                        <p style="color: var(--text-tertiary);">${reason}</p>
                    </div>`;
                resultSection.classList.remove('hidden');
            });
        }

        function initializeFaqChatbot() {
            const toggleBtn = document.getElementById('faq-chatbot-toggle');
            const closeBtn = document.getElementById('faq-close-btn');
            const chatbotWindow = document.getElementById('faq-chatbot-window');
            const faqContent = document.getElementById('faq-content');

            const showQuestions = () => {
                faqContent.innerHTML = '';
                faqData.forEach((faq, index) => {
                    const questionBtn = document.createElement('button');
                    questionBtn.className = 'faq-question block w-full text-right p-3 rounded-lg';
                    questionBtn.textContent = faq.question;
                    questionBtn.dataset.index = index;
                    faqContent.appendChild(questionBtn);
                });
            };

            const showAnswer = (index) => {
                const faq = faqData[index];
                faqContent.innerHTML = `
                    <div class="space-y-3">
                        <p class="font-bold text-indigo-400">${faq.question}</p>
                        <div class="leading-relaxed" style="color: var(--text-secondary);">${faq.answer}</div>
                        <button id="back-to-questions" class="text-sm text-indigo-400 hover:underline mt-4">&larr; العودة للأسئلة</button>
                    </div>
                `;
            };

            faqContent.addEventListener('click', (e) => {
                if (e.target.classList.contains('faq-question')) {
                    showAnswer(e.target.dataset.index);
                }
                if (e.target.id === 'back-to-questions') {
                    showQuestions();
                }
            });

            toggleBtn.addEventListener('click', () => {
                const isHidden = chatbotWindow.classList.contains('hidden');
                if (isHidden) {
                    showQuestions();
                    chatbotWindow.classList.remove('hidden');
                    setTimeout(() => {
                        chatbotWindow.classList.remove('opacity-0');
                        chatbotWindow.classList.add('transform', 'scale-100');
                    }, 10);
                } else {
                    chatbotWindow.classList.add('opacity-0');
                    chatbotWindow.classList.remove('transform', 'scale-100');
                    setTimeout(() => chatbotWindow.classList.add('hidden'), 300);
                }
            });

            closeBtn.addEventListener('click', () => {
                chatbotWindow.classList.add('opacity-0');
                chatbotWindow.classList.remove('transform', 'scale-100');
                setTimeout(() => chatbotWindow.classList.add('hidden'), 300);
            });
        }
        
        // --- MAIN APP LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');
            const tabs = document.querySelectorAll('.tab-btn');
            const disclaimer = document.getElementById('disclaimer-note');
            const modal = document.getElementById('course-modal');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            const createCard = (course, colors, tabId) => {
                const card = document.createElement('div');
                card.className = `card p-6 rounded-xl border ${colors.card} transition-all duration-300 transform hover:-translate-y-1 cursor-pointer`;
                card.innerHTML = `
                    <div><h3 class="font-bold text-xl ${colors.text} mb-2">${course.name}</h3><p class="mb-4" style="color: var(--text-tertiary);">${course.code}</p></div>
                    <div class="mt-auto pt-4 border-t text-sm space-y-2" style="border-color: var(--border-color);">
                        <div class="flex items-center gap-2" style="color: var(--text-secondary);"><svg class="h-4 w-4 ${colors.icon}" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span><b>الساعات:</b> ${course.crd}</span></div>
                        <div class="flex items-center gap-2" style="color: var(--text-secondary);"><svg class="h-4 w-4 ${colors.icon}" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span><b>الأسبقيات:</b> ${course.pre}</span></div>
                    </div>`;
                card.addEventListener('click', () => showModal(course, tabId));
                return card;
            };
            
            const showModal = (course, tabId) => {
                document.getElementById('modal-title').textContent = course.name;
                document.getElementById('modal-code').textContent = course.code;
                document.getElementById('modal-description').textContent = course.description;
                const telegramButton = document.getElementById('modal-telegram-link');
                if (tabId === 'tab1') {
                    telegramButton.style.display = 'flex';
                    telegramButton.href = course.telegramLink;
                } else {
                    telegramButton.style.display = 'none';
                }
                modal.classList.remove('hidden');
                modal.classList.add('flex');
            };

            const hideModal = () => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            };

            modalCloseBtn.addEventListener('click', hideModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    hideModal();
                }
            });


            const renderCurriculum = (tabId) => {
                const data = curriculumData[tabId];
                if (!data) return '';
                const container = document.createElement('div');
                container.id = tabId;
                container.className = 'tab-content';

                for (const semesterName in data.semesters) {
                    const semesterTitle = document.createElement('h2');
                    semesterTitle.className = 'semester-title';
                    semesterTitle.textContent = semesterName;
                    container.appendChild(semesterTitle);

                    const grid = document.createElement('div');
                    grid.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6';
                    
                    data.semesters[semesterName].forEach(course => {
                        grid.appendChild(createCard(course, data.colors, tabId));
                    });
                    container.appendChild(grid);
                }
                return container;
            };

            const switchTab = (tabId) => {
                mainContent.innerHTML = ''; // Clear main content
                if (tabId === 'tab4') {
                    mainContent.innerHTML = gpaCalculatorHTML;
                    initializeGpaCalculator();
                    disclaimer.style.display = 'none';
                } else if (tabId === 'tab5') {
                    mainContent.innerHTML = gradeCalculatorHTML;
                    initializeGradeCalculator();
                    disclaimer.style.display = 'none';
                }
                else {
                    mainContent.appendChild(renderCurriculum(tabId));
                    disclaimer.style.display = 'block';
                }
                
                const contentElement = mainContent.querySelector('.tab-content');
                if(contentElement) {
                    contentElement.classList.add('active');
                }
                
                tabs.forEach(tab => {
                    tab.classList.remove('active');
                    tab.style.backgroundColor = '';
                });

                const activeBtn = document.querySelector(`[data-tab="${tabId}"]`);
                if (activeBtn) {
                    activeBtn.classList.add('active');
                    const colors = { tab1: '#2563eb', tab2: '#0d9488', tab3: '#7e22ce', tab4: '#d97706', tab5: '#db2777' };
                    activeBtn.style.backgroundColor = colors[tabId];
                }
            };
            
            // --- THEME TOGGLE LOGIC ---
            const themeToggleBtn = document.getElementById('theme-toggle');
            const darkIcon = document.getElementById('theme-toggle-dark-icon');
            const lightIcon = document.getElementById('theme-toggle-light-icon');

            // Check for saved theme in localStorage
            if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                lightIcon.classList.remove('hidden');
                darkIcon.classList.add('hidden');
            } else {
                document.documentElement.classList.remove('dark');
                darkIcon.classList.remove('hidden');
                lightIcon.classList.add('hidden');
            }

            themeToggleBtn.addEventListener('click', function() {
                // toggle icons inside button
                darkIcon.classList.toggle('hidden');
                lightIcon.classList.toggle('hidden');

                // if set via local storage previously
                if (localStorage.getItem('color-theme')) {
                    if (localStorage.getItem('color-theme') === 'light') {
                        document.documentElement.classList.add('dark');
                        localStorage.setItem('color-theme', 'dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                        localStorage.setItem('color-theme', 'light');
                    }
                // if NOT set via local storage previously
                } else {
                    if (document.documentElement.classList.contains('dark')) {
                        document.documentElement.classList.remove('dark');
                        localStorage.setItem('color-theme', 'light');
                    } else {
                        document.documentElement.classList.add('dark');
                        localStorage.setItem('color-theme', 'dark');
                    }
                }
            });


            tabs.forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab.dataset.tab));
            });
            
            initializeFaqChatbot();
            switchTab('tab1');
        });
    </script>
</body>
</html>

